processor_resources:
  - label: "{package}_a1f89e3b3e46a91b"
    hp_transform:
      name: "hp_transform"
      input: |
        root = this
    
      mapping: |
        root = this
        root.data = this.aft
        root.aftID = this.aft.aftID
        root.data.logID = this.data.logID
        root.data.mobAction = this.action
        root.data.mobCode = this.mob_code
        root.data.mobDescription = this.mob_message
        root.data.description = if metadata("error_message") != null && metadata("error_message") != "" {
            metadata("error_message")
        } else {
            "unknown error from mongodb, check app log for more info"
        }
    
      result_mode: merge
    
      output: |
        root = this
        root.status.description = this.data.description