processor_resources:
  - label: "{package}_9aaa01e1175e6f97"
    hp_transform:
      name: "Hyper Connection Error"
      input: |-
            root = this
      mapping: |-
            root = this
            root.code = 2310
            root.status.status = 2310
            root.status.description = "Transaction not allow"
            
            let err_reason = if metadata("error_message") != null && metadata("error_message") != "" {
                metadata("error_message")
            } else {
                "unknown error from mongodb or redis, check app log for more info"
            }
            
            root.status.err_reason = $err_reason
            root.message = $err_reason
            
      result_mode: merge
      output: |-
            root = this
