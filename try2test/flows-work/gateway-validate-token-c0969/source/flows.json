{"exposed":{"exposedAll":true,"exposedFormat":"standard","filterIn":{"all":true,"filter":[]},"filterOut":{"all":true,"filter":[]},"useFilterIn":false,"useFilterOut":false},"header":{"input":[],"output":[]},"mainFlow":{"customBenthosInOut":false,"customBenthosInputs":"","customBenthosOutputs":"","exposed":{"exposedAll":true,"exposedFormat":"standard","filterIn":{"all":true,"filter":[]},"filterOut":{"all":true,"filter":[]},"useFilterIn":false,"useFilterOut":false},"flowId":"472a8ae2136c0969","flowName":"gateway-validate-token","flow_name":"gateway-validate-token-c0969","header":{"input":[],"output":[]},"isSubflow":false,"nodes":[{"action":"start","advanceCode":"","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"Start","foundIt":false,"h":30,"id":"6cada974011071eb","ignoreNode":false,"inputs":0,"l":true,"name":"Start","nextNodes":[{"cond":"success","id":"a071973b8ca6c241","next":true}],"outputs":1,"processId":"1740052446437487337","processName":"gateway-validate-token-1740052446437487337","resize":false,"rules":[{"cond":""}],"scopeId":"472a8ae2136c0969","scopeType":"mainFlow","type":"start","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[["a071973b8ca6c241"]],"x":873.5,"y":115,"z":"472a8ae2136c0969"},{"disabled":false,"id":"472a8ae2136c0969","ignoreNode":true,"info":"","label":"gateway-validate-token","scopeId":"472a8ae2136c0969","scopeType":"mainFlow","teamSharing":"Read-Write","type":"tab"},{"action":"define","autoInit":true,"borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","desc":"ประกาศ Input/Output","dirty":false,"display":"Define","endNode":false,"exception":"","filterIn":[{"default":"","max":0,"min":0,"name":"request","regexp":"","required":false,"type":"string","validated":false},{"all":false,"children":[{"default":"","max":0,"min":0,"name":"description","regexp":"","required":false,"type":"string","validated":false},{"default":0,"max":0,"min":0,"name":"status","required":false,"type":"integer","validated":false}],"max":0,"min":0,"name":"status","notEmpty":true,"required":false,"type":"map","validated":false},{"default":"","max":0,"min":0,"name":"token","regexp":"","required":false,"type":"string","validated":false}],"filterOut":[{"default":"","max":0,"min":0,"name":"request","regexp":"","required":false,"type":"string","validated":false},{"all":false,"children":[{"default":"","max":0,"min":0,"name":"description","regexp":"","required":false,"type":"string","validated":false},{"default":0,"max":0,"min":0,"name":"status","required":false,"type":"integer","validated":false}],"max":0,"min":0,"name":"status","notEmpty":true,"required":false,"type":"map","validated":false},{"default":"","max":0,"min":0,"name":"token","regexp":"","required":false,"type":"string","validated":false}],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"a071973b8ca6c241","ignoreNode":false,"inactiveNode":false,"input":[{"children":null,"defaultValue":"","expanded":true,"id":"21154d7c1f1e7285","input":true,"label":"request","max":0,"min":0,"name":"request","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":[{"children":null,"defaultValue":"","expanded":true,"id":"4b46c386c8de8f5b","input":true,"label":"description","max":0,"min":0,"name":"description","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":0,"expanded":true,"id":"098867a4d9af4e75","input":true,"label":"status","max":0,"min":0,"name":"status","output":true,"regexp":"","required":false,"selected":true,"sublabel":"integer","type":"integer","validated":false}],"defaultValue":null,"expanded":true,"id":"4977e18066759352","input":true,"label":"status","max":0,"min":0,"name":"status","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"144647ae079a561f","input":true,"label":"token","max":0,"min":0,"name":"token","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false}],"inputJson":"{\n    \"request\": \"\",\n    \"status\": {\n        \"description\": \"\",\n        \"status\": 0\n    },\n    \"token\": \"\"\n}","inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Define In/Out","nextNodes":[{"cond":"success","id":"edefccc8f6b9956c","next":true}],"output":[{"children":null,"defaultValue":"","expanded":true,"id":"21154d7c1f1e7285","input":true,"label":"request","max":0,"min":0,"name":"request","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":[{"children":null,"defaultValue":"","expanded":true,"id":"4b46c386c8de8f5b","input":true,"label":"description","max":0,"min":0,"name":"description","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":0,"expanded":true,"id":"098867a4d9af4e75","input":true,"label":"status","max":0,"min":0,"name":"status","output":true,"regexp":"","required":false,"selected":true,"sublabel":"integer","type":"integer","validated":false}],"defaultValue":null,"expanded":true,"id":"4977e18066759352","input":true,"label":"status","max":0,"min":0,"name":"status","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"144647ae079a561f","input":true,"label":"token","max":0,"min":0,"name":"token","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false}],"outputs":1,"processId":"1740052446437487337","processName":"gateway-validate-token-1740052446437487337","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{\n    \"request\": \"\",\n    \"status\": {\n        \"description\": \"\",\n        \"status\": 0\n    },\n    \"token\": \"\"\n}","scopeId":"472a8ae2136c0969","scopeType":"mainFlow","skeletonConfig":"### Fix Parameter ### \n# {{.name}}\n# {{.desc}}\n# {{.type}}\n# {{.id}}\n# {{.moved}}\n# {{.autoInit}}\n# {{.exception}}\n# {{.display}}\n\n### Databus Parameter ### \n#{}\n","type":"define","useFilterIn":false,"useFilterOut":false,"valid":true,"validationErrors":[],"vertical":true,"w":150,"wires":[["edefccc8f6b9956c"]],"x":873.5,"y":241,"z":"472a8ae2136c0969"},{"action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"root.token = if metadata(\"Authorization\") != null {\n    metadata(\"Authorization\")\n} else {\n    metadata(\"authorization\")\n}","color":"#ffffff","desc":"ดึง Token จาก Header ในส่วน Authorization","dirty":false,"display":"Code","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"edefccc8f6b9956c","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Get Header Token","nextNodes":[{"cond":"success","id":"c5308b91c7640be0","next":true}],"output":[],"outputs":1,"processId":"1740052446437487337","processName":"gateway-validate-token-1740052446437487337","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"472a8ae2136c0969","scopeType":"mainFlow","skeletonConfig":"### Fix Parameter ### \n# {{.desc}}\n# {{.id}}\n# {{.exception}}\n# {{.moved}}\n# {{.display}}\n# {{.code}}\n# {{.uuid}}\n# {{.type}}\n# {{.name}}\n\n### Databus Parameter ### \n#{}\n","type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":180,"wires":[["c5308b91c7640be0"]],"x":873.5,"y":370,"z":"472a8ae2136c0969"},{"action":"decision","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","decision-field-dataBus-container-div":"","desc":"Check Empty Token","dirty":false,"display":"Decision","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"c5308b91c7640be0","ignoreNode":false,"inactiveNode":false,"input":[],"inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Check Empty","nextNodes":[{"cond":"token == null || token == \"\"","id":"f654232a5368c111","next":true},{"cond":"else","id":"c132179c33d04f2c","next":true}],"output":[],"outputs":2,"postEzCode":"","preEzCode":"","processId":"1740052446437487337","processName":"gateway-validate-token-1740052446437487337","resize":false,"rule-container":"","rules":[{"cond":"token == null || token == \"\""},{"cond":"else"}],"scopeId":"472a8ae2136c0969","scopeType":"mainFlow","skeletonConfig":"### Fix Parameter ### \n# {{.desc}}\n# {{.id}}\n# {{.name}}\n# {{.type}}\n# {{.preEzCode}}\n# {{.uuid}}\n# {{.postEzCode}}\n# {{.exception}}\n# {{.display}}\n# {{.moved}}\n\n### Databus Parameter ### \n#{}\n","type":"decision","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":160,"wires":[["f654232a5368c111"],["c132179c33d04f2c"]],"x":873.5,"y":498,"z":"472a8ae2136c0969"},{"Filter":" ","action":"code","advanceCode":"","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"hp_transform:\n    name: \"hp_transform\"\n    input: |\n      root = this\n\n    mapping: |\n      root = {}\n      root.status.status = 100\n\n    result_mode: new\n\n","color":"#ffffff","dataBusCode":" ","desc":"หา token ไม่เจอ","dirty":false,"display":"Code","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"f654232a5368c111","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":true,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Set Token Invalid","nextNodes":[{"cond":"success","id":"6ca557cf8f259ebb","next":true}],"output":[],"outputs":1,"processId":"1740052446437487337","processName":"gateway-validate-token-1740052446437487337","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"472a8ae2136c0969","scopeType":"mainFlow","skeletonConfig":"### Fix Parameter ### \n# {{.moved}}\n# {{.name}}\n# {{.inactiveNode}}\n# {{.type}}\n# {{.Filter}}\n# {{.display}}\n# {{.id}}\n# {{.endNode}}\n# {{.desc}}\n# {{.dataBusCode}}\n# {{.codeEditor}}\n# {{.exception}}\n# {{.flipNode}}\n# {{.uuid}}\n# {{.code}}\n\n### Databus Parameter ### \n#{}\n","type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":180,"wires":[["6ca557cf8f259ebb"]],"x":611.5,"y":639,"z":"472a8ae2136c0969"},{"action":"subflow","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#C7E9C0","desc":"ดึงข้อมูล Status และ Descryption","dirty":false,"display":"Subflow","endNode":false,"exception":"","exposedAll":false,"filterIn":[{"all":true,"default":"{\"status\":0}","max":0,"min":0,"name":"status","required":false,"type":"map","validated":false}],"filterOut":[{"all":true,"default":"{\"description\":\"\",\"status\":0}","max":0,"min":0,"name":"status","required":false,"type":"map","validated":false}],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"6ca557cf8f259ebb","ignoreNode":false,"inactiveNode":false,"input":[{"children":[{"children":null,"defaultValue":null,"expanded":true,"id":"436cffabeb578907","input":true,"label":"status","max":0,"min":0,"name":"status","output":false,"regexp":"","required":false,"selected":false,"sublabel":"integer","type":"integer","validated":false}],"defaultValue":null,"expanded":true,"id":"1fc5129f1d248170","input":true,"label":"status","max":0,"min":0,"name":"status","output":false,"regexp":"","required":false,"selected":false,"sublabel":"map","type":"map","validated":false}],"inputJson":"{\n    \"status\": {\n        \"status\": 0\n    }\n}","inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Get Status Descryption","nextNodes":[{"cond":"success","id":"0f30d196450e6eaf","next":true}],"output":[{"children":[{"children":null,"defaultValue":null,"expanded":true,"id":"39d022224118bf5e","input":false,"label":"description","max":0,"min":0,"name":"description","output":true,"regexp":"","required":false,"selected":false,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":null,"expanded":true,"id":"436cffabeb578907","input":false,"label":"status","max":0,"min":0,"name":"status","output":true,"regexp":"","required":false,"selected":false,"sublabel":"integer","type":"integer","validated":false}],"defaultValue":null,"expanded":true,"id":"1fc5129f1d248170","input":false,"label":"status","max":0,"min":0,"name":"status","output":true,"regexp":"","required":false,"selected":false,"sublabel":"map","type":"map","validated":false}],"outputs":1,"processId":"1740052446437487337","processName":"gateway-validate-token-1740052446437487337","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{\n    \"status\": {\n        \"status\": 0\n    }\n}","scopeId":"472a8ae2136c0969","scopeType":"mainFlow","skeletonConfig":"### Fix Parameter ### \n# {{.id}}\n# {{.moved}}\n# {{.subflowId}}\n# {{.exposedAll}}\n# {{.exception}}\n# {{.desc}}\n# {{.name}}\n# {{.display}}\n# {{.type}}\n\n### Databus Parameter ### \n#{}\n","subflow":true,"subflowId":"21bbe78f7405a528","type":"ssqsubflow","useFilterIn":true,"useFilterOut":true,"valid":true,"validationErrors":[],"vertical":true,"w":220,"wires":[["0f30d196450e6eaf"]],"x":611.5,"y":757,"z":"472a8ae2136c0969"},{"action":"end","advanceCode":"","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"End","foundIt":false,"h":30,"id":"0f30d196450e6eaf","ignoreNode":false,"inputs":1,"l":true,"name":"End","nextNodes":[],"outPort":0,"outputs":0,"processId":"1740052446437487337","processName":"gateway-validate-token-1740052446437487337","resize":false,"scopeId":"472a8ae2136c0969","scopeType":"mainFlow","type":"end","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[],"x":612.5,"y":858,"z":"472a8ae2136c0969"},{"Filter":" ","action":"subflow","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","desc":"ตรวจสอบ token","dirty":false,"display":"Subflow","endNode":false,"exception":"","exposedAll":false,"filterIn":[{"default":null,"max":0,"min":0,"name":"token","regexp":"","required":false,"type":"string","validated":false}],"filterOut":[{"default":null,"max":0,"min":0,"name":"code","required":false,"type":"integer","validated":false},{"all":true,"default":"{}","max":0,"min":0,"name":"token_header","required":false,"type":"map","validated":false},{"all":true,"default":"{}","max":0,"min":0,"name":"token_payload","required":false,"type":"map","validated":false}],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"c132179c33d04f2c","ignoreNode":false,"inactiveNode":false,"input":[{"children":null,"defaultValue":null,"expanded":true,"id":"443b8205d3d4ee48","input":true,"label":"token","max":0,"min":0,"name":"token","output":false,"regexp":"","required":false,"selected":false,"sublabel":"string","type":"string","validated":false}],"inputJson":"{\n    \"token\": \"\"\n}","inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Validate Token","nextNodes":[{"cond":"success","id":"b53e3eca1b307599","next":true}],"output":[{"children":null,"defaultValue":null,"expanded":true,"id":"189dda2d777f90d9","input":false,"label":"code","max":0,"min":0,"name":"code","output":true,"regexp":"","required":false,"selected":false,"sublabel":"integer","type":"integer","validated":false},{"children":null,"defaultValue":null,"expanded":true,"id":"2ad5f5f3d6d2d9c0","input":false,"label":"token_header","max":0,"min":0,"name":"token_header","output":true,"regexp":"","required":false,"selected":false,"sublabel":"map","type":"map","validated":false},{"children":null,"defaultValue":null,"expanded":true,"id":"3eef2722bc4ee376","input":false,"label":"token_payload","max":0,"min":0,"name":"token_payload","output":true,"regexp":"","required":false,"selected":false,"sublabel":"map","type":"map","validated":false}],"outputs":1,"processId":"1740052446437487337","processName":"gateway-validate-token-1740052446437487337","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{\n    \"token\": \"\"\n}","scopeId":"472a8ae2136c0969","scopeType":"mainFlow","skeletonConfig":"### Fix Parameter ### \n# {{.exposedAll}}\n# {{.display}}\n# {{.subflowId}}\n# {{.inactiveNode}}\n# {{.endNode}}\n# {{.Filter}}\n# {{.name}}\n# {{.desc}}\n# {{.type}}\n# {{.testButton}}\n# {{.id}}\n# {{.flipNode}}\n# {{.subflowManagement}}\n# {{.moved}}\n# {{.exception}}\n# {{.subflowField}}\n\n### Databus Parameter ### \n#{}\n","subflow":true,"subflowField":" ","subflowId":"de9f5d6922628783","subflowManagement":" ","testButton":" ","type":"ssqsubflow","useFilterIn":true,"useFilterOut":true,"valid":true,"validationErrors":[],"vertical":true,"w":160,"wires":[["b53e3eca1b307599"]],"x":1024.5,"y":643,"z":"472a8ae2136c0969"},{"action":"decision","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","decision-field-dataBus-container-div":" ","desc":"ตวจสอบ Code ว่ามี Error หรือไม่","dirty":false,"display":"Decision","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"b53e3eca1b307599","ignoreNode":false,"inactiveNode":false,"input":[],"inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Check Code","nextNodes":[{"cond":"code \u003e 0","id":"f654232a5368c111","next":true},{"cond":"else","id":"b0fe65c32ca3c95d","next":true}],"output":[],"outputs":2,"postEzCode":"","preEzCode":"","processId":"1740052446437487337","processName":"gateway-validate-token-1740052446437487337","resize":false,"rule-container":" ","rules":[{"cond":"code \u003e 0"},{"cond":"else"}],"scopeId":"472a8ae2136c0969","scopeType":"mainFlow","skeletonConfig":"### Fix Parameter ### \n# {{.display}}\n# {{.endNode}}\n# {{.inactiveNode}}\n# {{.flipNode}}\n# {{.postEzCode}}\n# {{.preEzCode}}\n# {{.decision-field-dataBus-container-div}}\n# {{.type}}\n# {{.moved}}\n# {{.rule-container}}\n# {{.exception}}\n# {{.uuid}}\n# {{.desc}}\n# {{.name}}\n# {{.id}}\n\n### Databus Parameter ### \n#{}\n","type":"decision","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":150,"wires":[["f654232a5368c111"],["b0fe65c32ca3c95d"]],"x":1025.5,"y":761,"z":"472a8ae2136c0969"},{"action":"decision","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","decision-field-dataBus-container-div":" ","desc":"ตรวจสอบ Request Body ว่ามีหรือไม่","dirty":false,"display":"Decision","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"b0fe65c32ca3c95d","ignoreNode":false,"inactiveNode":false,"input":[],"inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Check Req Body","nextNodes":[{"cond":"request != null \u0026\u0026 request != \"\"","id":"c9c69748a5e79b7f","next":true},{"cond":"else","id":"734f2395d572e441","next":true}],"output":[],"outputs":2,"postEzCode":"","preEzCode":"","processId":"1740052446437487337","processName":"gateway-validate-token-1740052446437487337","resize":false,"rule-container":" ","rules":[{"cond":"request != null \u0026\u0026 request != \"\""},{"cond":"else"}],"scopeId":"472a8ae2136c0969","scopeType":"mainFlow","skeletonConfig":"### Fix Parameter ### \n# {{.moved}}\n# {{.desc}}\n# {{.exception}}\n# {{.id}}\n# {{.uuid}}\n# {{.flipNode}}\n# {{.preEzCode}}\n# {{.endNode}}\n# {{.name}}\n# {{.type}}\n# {{.rule-container}}\n# {{.postEzCode}}\n# {{.decision-field-dataBus-container-div}}\n# {{.inactiveNode}}\n# {{.display}}\n\n### Databus Parameter ### \n#{}\n","type":"decision","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":180,"wires":[["c9c69748a5e79b7f"],["734f2395d572e441"]],"x":1033.5,"y":911,"z":"472a8ae2136c0969"},{"action":"end","advanceCode":"","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"End","foundIt":false,"h":30,"id":"c3b28f04faf54e63","ignoreNode":false,"inputs":1,"l":true,"name":"End","nextNodes":[],"outPort":0,"outputs":0,"processId":"1740052446437487337","processName":"gateway-validate-token-1740052446437487337","resize":false,"scopeId":"472a8ae2136c0969","scopeType":"mainFlow","type":"end","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[],"x":1176,"y":1332,"z":"472a8ae2136c0969"},{"action":"subflow","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#C7E9C0","desc":"ดึงข้อมูล Status และ Descryption","dirty":false,"display":"Subflow","endNode":false,"exception":"","exposedAll":false,"filterIn":[{"all":true,"default":"{\"status\":0}","max":0,"min":0,"name":"status","required":false,"type":"map","validated":false}],"filterOut":[{"all":true,"default":"{\"description\":\"\",\"status\":0}","max":0,"min":0,"name":"status","required":false,"type":"map","validated":false}],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"4c8e6fad71eb0eef","ignoreNode":false,"inactiveNode":false,"input":[{"children":[{"children":null,"defaultValue":null,"expanded":true,"id":"436cffabeb578907","input":true,"label":"status","max":0,"min":0,"name":"status","output":false,"regexp":"","required":false,"selected":false,"sublabel":"integer","type":"integer","validated":false}],"defaultValue":null,"expanded":true,"id":"1fc5129f1d248170","input":true,"label":"status","max":0,"min":0,"name":"status","output":false,"regexp":"","required":false,"selected":false,"sublabel":"map","type":"map","validated":false}],"inputJson":"{\n    \"status\": {\n        \"status\": 0\n    }\n}","inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Get Status Descryption","nextNodes":[{"cond":"success","id":"c3b28f04faf54e63","next":true}],"output":[{"children":[{"children":null,"defaultValue":null,"expanded":true,"id":"39d022224118bf5e","input":false,"label":"description","max":0,"min":0,"name":"description","output":true,"regexp":"","required":false,"selected":false,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":null,"expanded":true,"id":"436cffabeb578907","input":false,"label":"status","max":0,"min":0,"name":"status","output":true,"regexp":"","required":false,"selected":false,"sublabel":"integer","type":"integer","validated":false}],"defaultValue":null,"expanded":true,"id":"1fc5129f1d248170","input":false,"label":"status","max":0,"min":0,"name":"status","output":true,"regexp":"","required":false,"selected":false,"sublabel":"map","type":"map","validated":false}],"outputs":1,"processId":"1740052446437487337","processName":"gateway-validate-token-1740052446437487337","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{\n    \"status\": {\n        \"status\": 0\n    }\n}","scopeId":"472a8ae2136c0969","scopeType":"mainFlow","skeletonConfig":"### Fix Parameter ### \n# {{.id}}\n# {{.moved}}\n# {{.subflowId}}\n# {{.exposedAll}}\n# {{.exception}}\n# {{.desc}}\n# {{.name}}\n# {{.display}}\n# {{.type}}\n\n### Databus Parameter ### \n#{}\n","subflow":true,"subflowId":"21bbe78f7405a528","type":"ssqsubflow","useFilterIn":true,"useFilterOut":true,"valid":true,"validationErrors":[],"vertical":true,"w":220,"wires":[["c3b28f04faf54e63"]],"x":1177,"y":1200,"z":"472a8ae2136c0969"},{"Filter":" ","action":"code","advanceCode":"","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"hp_transform:\n    name: \"hp_transform\"\n    input: |\n      root = this\n\n    mapping: |\n      root = {}\n      root.status.status = 0\n\n    result_mode: new\n\n","color":"#ffffff","dataBusCode":" ","desc":"หา token ไม่เจอ","dirty":false,"display":"Code","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"734f2395d572e441","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":true,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Set Success Status","nextNodes":[{"cond":"success","id":"4c8e6fad71eb0eef","next":true}],"output":[],"outputs":1,"processId":"1740052446437487337","processName":"gateway-validate-token-1740052446437487337","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"472a8ae2136c0969","scopeType":"mainFlow","skeletonConfig":"### Fix Parameter ### \n# {{.moved}}\n# {{.name}}\n# {{.inactiveNode}}\n# {{.type}}\n# {{.Filter}}\n# {{.display}}\n# {{.id}}\n# {{.endNode}}\n# {{.desc}}\n# {{.dataBusCode}}\n# {{.codeEditor}}\n# {{.exception}}\n# {{.flipNode}}\n# {{.uuid}}\n# {{.code}}\n\n### Databus Parameter ### \n#{}\n","type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":180,"wires":[["4c8e6fad71eb0eef"]],"x":1176,"y":1059,"z":"472a8ae2136c0969"},{"Filter":" ","action":"subflow","advanceCode":"","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","desc":"ถอดรหัส request","dirty":false,"display":"Subflow","endNode":false,"exception":"","exposedAll":false,"filterIn":[{"default":null,"max":0,"min":0,"name":"request","regexp":"","required":false,"type":"string","validated":false}],"filterOut":[{"all":true,"default":"{}","max":0,"min":0,"name":"decryptedRequest","required":false,"type":"map","validated":false}],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"c9c69748a5e79b7f","ignoreNode":false,"inactiveNode":false,"input":[{"children":null,"defaultValue":null,"depth":0,"expanded":true,"id":"262f5ef40c9f93a6","input":true,"label":"request","max":0,"min":0,"name":"request","output":false,"regexp":"","required":false,"selected":false,"sublabel":"string","type":"string","validated":false}],"inputJson":"{\n    \"request\": \"\"\n}","inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Decrypt Request","nextNodes":[{"cond":"success","id":"85eedeeea2eefcd0","next":true}],"output":[{"children":null,"defaultValue":null,"depth":0,"expanded":true,"id":"317e54310801e036","input":false,"label":"decryptedRequest","max":0,"min":0,"name":"decryptedRequest","output":true,"regexp":"","required":false,"selected":false,"sublabel":"map","treeList":{"container":{"0":{},"length":1,"prevObject":{"length":1}},"label":{"0":{},"length":1},"labelPadding":{"0":{},"length":1,"prevObject":{"length":1}},"parentList":{"0":{},"length":1,"prevObject":{"length":1}}},"type":"map","validated":false}],"outputs":1,"processId":"1740052446437487337","processName":"gateway-validate-token-1740052446437487337","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{\n    \"request\": \"\"\n}","scopeId":"472a8ae2136c0969","scopeType":"mainFlow","skeletonConfig":"### Fix Parameter ### \n# {{.exposedAll}}\n# {{.display}}\n# {{.subflowId}}\n# {{.inactiveNode}}\n# {{.endNode}}\n# {{.Filter}}\n# {{.name}}\n# {{.desc}}\n# {{.type}}\n# {{.testButton}}\n# {{.id}}\n# {{.flipNode}}\n# {{.subflowManagement}}\n# {{.moved}}\n# {{.exception}}\n# {{.subflowField}}\n\n### Databus Parameter ### \n#{}\n","subflow":true,"subflowField":" ","subflowId":"3ddb35701ffa09a8","subflowManagement":" ","testButton":" ","type":"ssqsubflow","useFilterIn":true,"useFilterOut":true,"valid":true,"validationErrors":[],"vertical":true,"w":180,"wires":[["85eedeeea2eefcd0"]],"x":875,"y":1053,"z":"472a8ae2136c0969"},{"Filter":" ","action":"code","advanceCode":"","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"hp_transform:\n    name: \"hp_transform\"\n    input: |\n      root = this\n      root.decryptedRequest = this.decryptedRequest.or({})\n\n    mapping: |\n      root = this\n      root.decryptedRequest.status = {\"status\":0}\n\n    result_mode: new\n    \n    output: |\n        root = {}\n        root = this.decryptedRequest\n","color":"#ffffff","dataBusCode":" ","desc":"เตรียมผลลัพธ์ออก output","dirty":false,"display":"Code","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"1a79516ec53a5077","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":true,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Prepare Result","nextNodes":[{"cond":"success","id":"4c8e6fad71eb0eef","next":true}],"output":[],"outputs":1,"processId":"1740052446437487337","processName":"gateway-validate-token-1740052446437487337","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"472a8ae2136c0969","scopeType":"mainFlow","skeletonConfig":"### Fix Parameter ### \n# {{.code}}\n# {{.moved}}\n# {{.dataBusCode}}\n# {{.desc}}\n# {{.flipNode}}\n# {{.Filter}}\n# {{.type}}\n# {{.exception}}\n# {{.display}}\n# {{.inactiveNode}}\n# {{.uuid}}\n# {{.id}}\n# {{.codeEditor}}\n# {{.name}}\n# {{.endNode}}\n\n### Databus Parameter ### \n#{}\n","type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":160,"wires":[["4c8e6fad71eb0eef"]],"x":880.5,"y":1619,"z":"472a8ae2136c0969"},{"Filter":" ","action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"root.tokenData = this.token_payload.or({})\nroot.customerID = this.decryptedRequest.customerID.or(\"\")","color":"#ffffff","dataBusCode":" ","desc":"เตรียมข้อมูลสำหรับเรียก validate secret","dirty":false,"display":"Code","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"85eedeeea2eefcd0","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Prepare for Validate Secret","nextNodes":[{"cond":"success","id":"c7b2761a19b5cb10","next":true}],"output":[],"outputs":1,"processId":"1740052446437487337","processName":"gateway-validate-token-1740052446437487337","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"472a8ae2136c0969","scopeType":"mainFlow","skeletonConfig":"### Fix Parameter ### \n# {{.exception}}\n# {{.flipNode}}\n# {{.desc}}\n# {{.type}}\n# {{.name}}\n# {{.id}}\n# {{.moved}}\n# {{.inactiveNode}}\n# {{.uuid}}\n# {{.codeEditor}}\n# {{.dataBusCode}}\n# {{.Filter}}\n# {{.display}}\n# {{.code}}\n# {{.endNode}}\n\n### Databus Parameter ### \n#{}\n","type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":240,"wires":[["c7b2761a19b5cb10"]],"x":874.5,"y":1205,"z":"472a8ae2136c0969"},{"Filter":" ","action":"subflow","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","desc":"ตรวจสอบ Secrete ว่าตรงกันหรือไม่","dirty":false,"display":"Subflow","endNode":false,"exception":"","exposedAll":false,"filterIn":[{"default":null,"max":0,"min":0,"name":"customerID","regexp":"","required":false,"type":"string","validated":false},{"all":true,"default":"{\"secret\":{\"customerID\":\"\",\"personID\":\"\"}}","max":0,"min":0,"name":"tokenData","required":false,"type":"map","validated":false},{"all":true,"default":"{\"debtor\":{\"Account\":{\"customerID\":\"\"}}}","max":0,"min":0,"name":"trans","required":false,"type":"map","validated":false}],"filterOut":[{"default":null,"max":0,"min":0,"name":"cif","regexp":"","required":false,"type":"string","validated":false},{"default":null,"max":0,"min":0,"name":"code","required":false,"type":"integer","validated":false},{"default":null,"max":0,"min":0,"name":"customerID","regexp":"","required":false,"type":"string","validated":false}],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"c7b2761a19b5cb10","ignoreNode":false,"inactiveNode":false,"input":[{"children":null,"defaultValue":null,"expanded":true,"id":"0b00aec63b8226a2","input":true,"label":"customerID","max":0,"min":0,"name":"customerID","output":false,"regexp":"","required":false,"selected":false,"sublabel":"string","type":"string","validated":false},{"children":[{"children":[{"children":null,"defaultValue":null,"expanded":true,"id":"00ffb74dac1bc1d2","input":true,"label":"customerID","max":0,"min":0,"name":"customerID","output":false,"regexp":"","required":false,"selected":false,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":null,"expanded":true,"id":"4916023c9e78e7af","input":true,"label":"personID","max":0,"min":0,"name":"personID","output":false,"regexp":"","required":false,"selected":false,"sublabel":"string","type":"string","validated":false}],"defaultValue":null,"expanded":true,"id":"13da1051cc6fcf67","input":true,"label":"secret","max":0,"min":0,"name":"secret","output":false,"regexp":"","required":false,"selected":false,"sublabel":"map","type":"map","validated":false}],"defaultValue":null,"expanded":true,"id":"50a622f27d3e22a9","input":true,"label":"tokenData","max":0,"min":0,"name":"tokenData","output":false,"regexp":"","required":false,"selected":false,"sublabel":"map","type":"map","validated":false},{"children":[{"children":[{"children":[{"children":null,"defaultValue":null,"expanded":true,"id":"1680a1813eba5163","input":true,"label":"customerID","max":0,"min":0,"name":"customerID","output":false,"regexp":"","required":false,"selected":false,"sublabel":"string","type":"string","validated":false}],"defaultValue":null,"expanded":true,"id":"29df6fe524559023","input":true,"label":"Account","max":0,"min":0,"name":"Account","output":false,"regexp":"","required":false,"selected":false,"sublabel":"map","type":"map","validated":false}],"defaultValue":null,"expanded":true,"id":"0f14a1d8860b1d8e","input":true,"label":"debtor","max":0,"min":0,"name":"debtor","output":false,"regexp":"","required":false,"selected":false,"sublabel":"map","type":"map","validated":false}],"defaultValue":null,"expanded":true,"id":"198523e0b4bca4e0","input":true,"label":"trans","max":0,"min":0,"name":"trans","output":false,"regexp":"","required":false,"selected":false,"sublabel":"map","type":"map","validated":false}],"inputJson":"{}","inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Validate Secrete","nextNodes":[{"cond":"success","id":"c9de85d187f93d24","next":true}],"output":[{"children":null,"defaultValue":null,"expanded":true,"id":"165f9454e0e1d071","input":false,"label":"cif","max":0,"min":0,"name":"cif","output":true,"regexp":"","required":false,"selected":false,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":null,"expanded":true,"id":"2874e1814e41b545","input":false,"label":"code","max":0,"min":0,"name":"code","output":true,"regexp":"","required":false,"selected":false,"sublabel":"integer","type":"integer","validated":false},{"children":null,"defaultValue":null,"expanded":true,"id":"0b00aec63b8226a2","input":false,"label":"customerID","max":0,"min":0,"name":"customerID","output":true,"regexp":"","required":false,"selected":false,"sublabel":"string","type":"string","validated":false}],"outputs":1,"processId":"1740052446437487337","processName":"gateway-validate-token-1740052446437487337","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"472a8ae2136c0969","scopeType":"mainFlow","skeletonConfig":"### Fix Parameter ### \n# {{.id}}\n# {{.display}}\n# {{.subflowField}}\n# {{.Filter}}\n# {{.subflowManagement}}\n# {{.subflowId}}\n# {{.inactiveNode}}\n# {{.exposedAll}}\n# {{.endNode}}\n# {{.name}}\n# {{.moved}}\n# {{.testButton}}\n# {{.desc}}\n# {{.exception}}\n# {{.type}}\n# {{.flipNode}}\n\n### Databus Parameter ### \n#{}\n","subflow":true,"subflowField":" ","subflowId":"2dfb873d855e2391","subflowManagement":" ","testButton":" ","type":"ssqsubflow","useFilterIn":true,"useFilterOut":true,"valid":true,"validationErrors":[],"vertical":true,"w":160,"wires":[["c9de85d187f93d24"]],"x":874.5,"y":1343,"z":"472a8ae2136c0969"},{"action":"decision","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","decision-field-dataBus-container-div":" ","desc":"ถ้าไม่เป็น 0 คือไม่ผ่าน","dirty":false,"display":"Decision","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"c9de85d187f93d24","ignoreNode":false,"inactiveNode":false,"input":[],"inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Check Code","nextNodes":[{"cond":"code \u003e 0","id":"f654232a5368c111","next":true},{"cond":"else","id":"1a79516ec53a5077","next":true}],"output":[],"outputs":2,"postEzCode":"","preEzCode":"","processId":"1740052446437487337","processName":"gateway-validate-token-1740052446437487337","resize":false,"rule-container":" ","rules":[{"cond":"code \u003e 0"},{"cond":"else"}],"scopeId":"472a8ae2136c0969","scopeType":"mainFlow","skeletonConfig":"### Fix Parameter ### \n# {{.id}}\n# {{.decision-field-dataBus-container-div}}\n# {{.postEzCode}}\n# {{.uuid}}\n# {{.type}}\n# {{.desc}}\n# {{.preEzCode}}\n# {{.name}}\n# {{.exception}}\n# {{.rule-container}}\n# {{.display}}\n# {{.moved}}\n\n### Databus Parameter ### \n#{}\n","type":"decision","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":150,"wires":[["f654232a5368c111"],["1a79516ec53a5077"]],"x":874.5,"y":1473,"z":"472a8ae2136c0969"}],"output":[null],"startNodeId":"6cada974011071eb","transport":{"inputs":"","outputs":"","type":"YAML"}},"nodeList":{"MainFlowId":"472a8ae2136c0969","MainFlowName":"gateway-validate-token","Nodes":[{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"6cada974011071eb","NodeName":"Start","NodeType":"start","Status":"","SubflowId":"","SubflowName":"","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"472a8ae2136c0969","NodeName":"","NodeType":"tab","Status":"","SubflowId":"","SubflowName":"","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"a071973b8ca6c241","NodeName":"Define In/Out","NodeType":"define","Status":"","SubflowId":"","SubflowName":"","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"edefccc8f6b9956c","NodeName":"Get Header Token","NodeType":"code","Status":"","SubflowId":"","SubflowName":"","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"c5308b91c7640be0","NodeName":"Check Empty","NodeType":"decision","Status":"","SubflowId":"","SubflowName":"","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"f654232a5368c111","NodeName":"Set Token Invalid","NodeType":"code","Status":"","SubflowId":"","SubflowName":"","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"6ca557cf8f259ebb","NodeName":"Get Status Descryption","NodeType":"ssqsubflow","Status":"","SubflowId":"","SubflowName":"","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"0f30d196450e6eaf","NodeName":"End","NodeType":"end","Status":"","SubflowId":"","SubflowName":"","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"c132179c33d04f2c","NodeName":"Validate Token","NodeType":"ssqsubflow","Status":"","SubflowId":"","SubflowName":"","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"b53e3eca1b307599","NodeName":"Check Code","NodeType":"decision","Status":"","SubflowId":"","SubflowName":"","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"b0fe65c32ca3c95d","NodeName":"Check Req Body","NodeType":"decision","Status":"","SubflowId":"","SubflowName":"","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"c3b28f04faf54e63","NodeName":"End","NodeType":"end","Status":"","SubflowId":"","SubflowName":"","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"4c8e6fad71eb0eef","NodeName":"Get Status Descryption","NodeType":"ssqsubflow","Status":"","SubflowId":"","SubflowName":"","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"734f2395d572e441","NodeName":"Set Success Status","NodeType":"code","Status":"","SubflowId":"","SubflowName":"","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"c9c69748a5e79b7f","NodeName":"Decrypt Request","NodeType":"ssqsubflow","Status":"","SubflowId":"","SubflowName":"","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"1a79516ec53a5077","NodeName":"Prepare Result","NodeType":"code","Status":"","SubflowId":"","SubflowName":"","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"85eedeeea2eefcd0","NodeName":"Prepare for Validate Secret","NodeType":"code","Status":"","SubflowId":"","SubflowName":"","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"c7b2761a19b5cb10","NodeName":"Validate Secrete","NodeType":"ssqsubflow","Status":"","SubflowId":"","SubflowName":"","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"c9de85d187f93d24","NodeName":"Check Code","NodeType":"decision","Status":"","SubflowId":"","SubflowName":"","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"739c836ace5d8f6e","NodeName":"Start","NodeType":"startsub","Status":"","SubflowId":"21bbe78f7405a528","SubflowName":"sub-get-response-status","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"6368f0913225461a","NodeName":"Define In/Out","NodeType":"define","Status":"","SubflowId":"21bbe78f7405a528","SubflowName":"sub-get-response-status","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"db32180fd190e12a","NodeName":"Get Moble Status","NodeType":"ssqsubflow","Status":"","SubflowId":"21bbe78f7405a528","SubflowName":"sub-get-response-status","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"6933862f31606bee","NodeName":"Check Not Found","NodeType":"decision","Status":"","SubflowId":"21bbe78f7405a528","SubflowName":"sub-get-response-status","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"71a09c53e2ebd8dc","NodeName":"Get code from result","NodeType":"code","Status":"","SubflowId":"21bbe78f7405a528","SubflowName":"sub-get-response-status","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"c51ec00cb63dce43","NodeName":"Check Status 0","NodeType":"decision","Status":"","SubflowId":"21bbe78f7405a528","SubflowName":"sub-get-response-status","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"95aa979be502fc8d","NodeName":"End","NodeType":"endsub","Status":"","SubflowId":"21bbe78f7405a528","SubflowName":"sub-get-response-status","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"4062e781c0f60f40","NodeName":"Set Default Error","NodeType":"code","Status":"","SubflowId":"21bbe78f7405a528","SubflowName":"sub-get-response-status","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"3131321a41654a30","NodeName":"End","NodeType":"endsub","Status":"","SubflowId":"21bbe78f7405a528","SubflowName":"sub-get-response-status","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"a822da09b4ad910a","NodeName":"Check Message","NodeType":"decision","Status":"","SubflowId":"21bbe78f7405a528","SubflowName":"sub-get-response-status","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"2d82568866dec78d","NodeName":"English Message","NodeType":"code","Status":"","SubflowId":"21bbe78f7405a528","SubflowName":"sub-get-response-status","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"2838a7131ec82165","NodeName":"Thai Message","NodeType":"code","Status":"","SubflowId":"21bbe78f7405a528","SubflowName":"sub-get-response-status","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"223b912717d285bc","NodeName":"Set Default Error","NodeType":"code","Status":"","SubflowId":"21bbe78f7405a528","SubflowName":"sub-get-response-status","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"43d99f5f22ade171","NodeName":"End","NodeType":"endsub","Status":"","SubflowId":"21bbe78f7405a528","SubflowName":"sub-get-response-status","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"21bbe78f7405a528","NodeName":"","NodeType":"tab","Status":"","SubflowId":"21bbe78f7405a528","SubflowName":"sub-get-response-status","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"0fa8330d4183dcf6","NodeName":"Start","NodeType":"startsub","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"062424cbf7fe92bd","NodeName":"Get by redis_key","NodeType":"code","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"d083fb8aa4f14c34","NodeName":"Define In/Out","NodeType":"define","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"c14f8ca3764fe47f","NodeName":"Check Key","NodeType":"decision","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"63561b0af6cc8dac","NodeName":"Check Empty","NodeType":"decision","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"baeea740e703a752","NodeName":"End","NodeType":"endsub","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"9526fb98677b3fbe","NodeName":"Convert String to Map","NodeType":"code","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"1627fdc80db0dbcf","NodeName":"End","NodeType":"endsub","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"4a79b3d361a4baea","NodeName":"Return not_found ","NodeType":"code","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"272e53e257af83de","NodeName":"Return not_found ","NodeType":"code","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"d0534c8c9b38ec32","NodeName":"","NodeType":"tab","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"52e8c70785f341a3","NodeName":"Start","NodeType":"startsub","Status":"","SubflowId":"de9f5d6922628783","SubflowName":"flow-validate-token","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"4c997e25c80a7e0b","NodeName":"Define In/Out","NodeType":"define","Status":"","SubflowId":"de9f5d6922628783","SubflowName":"flow-validate-token","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"2115f74c603bfb76","NodeName":"To JWT Token","NodeType":"code","Status":"","SubflowId":"de9f5d6922628783","SubflowName":"flow-validate-token","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"d2010b915b280273","NodeName":"Token to Data","NodeType":"code","Status":"","SubflowId":"de9f5d6922628783","SubflowName":"flow-validate-token","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"d86b3ee5a75f1126","NodeName":"Check JWT Token","NodeType":"decision","Status":"","SubflowId":"de9f5d6922628783","SubflowName":"flow-validate-token","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"34725811f261bc2b","NodeName":"End","NodeType":"endsub","Status":"","SubflowId":"de9f5d6922628783","SubflowName":"flow-validate-token","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"9498e7133455ad86","NodeName":"Decrypt customerID","NodeType":"draft","Status":"","SubflowId":"de9f5d6922628783","SubflowName":"flow-validate-token","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"2a912193f54b8581","NodeName":"Read Key in Cache","NodeType":"ssqsubflow","Status":"","SubflowId":"de9f5d6922628783","SubflowName":"flow-validate-token","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"1ffbb645ceccf559","NodeName":"Make Redis Key","NodeType":"code","Status":"","SubflowId":"de9f5d6922628783","SubflowName":"flow-validate-token","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"9370f0cde9574e77","NodeName":"Set Code Zero","NodeType":"code","Status":"","SubflowId":"de9f5d6922628783","SubflowName":"flow-validate-token","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"881282aad889433d","NodeName":"Check Not Found","NodeType":"decision","Status":"","SubflowId":"de9f5d6922628783","SubflowName":"flow-validate-token","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"c55e50cad425ce60","NodeName":"End","NodeType":"endsub","Status":"","SubflowId":"de9f5d6922628783","SubflowName":"flow-validate-token","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"cdafa7b7e636e6b1","NodeName":"End","NodeType":"endsub","Status":"","SubflowId":"de9f5d6922628783","SubflowName":"flow-validate-token","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"83696a642b3cecec","NodeName":"Cut Prefix","NodeType":"code","Status":"","SubflowId":"de9f5d6922628783","SubflowName":"flow-validate-token","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"de9f5d6922628783","NodeName":"","NodeType":"tab","Status":"","SubflowId":"de9f5d6922628783","SubflowName":"flow-validate-token","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"0fa8330d4183dcf6","NodeName":"Start","NodeType":"startsub","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"062424cbf7fe92bd","NodeName":"Get by redis_key","NodeType":"code","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"d083fb8aa4f14c34","NodeName":"Define In/Out","NodeType":"define","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"c14f8ca3764fe47f","NodeName":"Check Key","NodeType":"decision","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"63561b0af6cc8dac","NodeName":"Check Empty","NodeType":"decision","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"baeea740e703a752","NodeName":"End","NodeType":"endsub","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"9526fb98677b3fbe","NodeName":"Convert String to Map","NodeType":"code","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"1627fdc80db0dbcf","NodeName":"End","NodeType":"endsub","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"4a79b3d361a4baea","NodeName":"Return not_found ","NodeType":"code","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"272e53e257af83de","NodeName":"Return not_found ","NodeType":"code","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"d0534c8c9b38ec32","NodeName":"","NodeType":"tab","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"cbbdce898a754b8b","NodeName":"Start","NodeType":"startsub","Status":"","SubflowId":"3ddb35701ffa09a8","SubflowName":"flow-decrypt-request","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"11bfeffca70fb65e","NodeName":"Decrypt Code","NodeType":"code","Status":"","SubflowId":"3ddb35701ffa09a8","SubflowName":"flow-decrypt-request","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"a4d295875883624b","NodeName":"End","NodeType":"endsub","Status":"","SubflowId":"3ddb35701ffa09a8","SubflowName":"flow-decrypt-request","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"ddb4338739792aca","NodeName":"Define In/Out","NodeType":"define","Status":"","SubflowId":"3ddb35701ffa09a8","SubflowName":"flow-decrypt-request","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"cdb3a2dcd80ae8bc","NodeName":"Convert Data to Json","NodeType":"code","Status":"","SubflowId":"3ddb35701ffa09a8","SubflowName":"flow-decrypt-request","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"3ddb35701ffa09a8","NodeName":"","NodeType":"tab","Status":"","SubflowId":"3ddb35701ffa09a8","SubflowName":"flow-decrypt-request","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"8ecddc8f9a20686c","NodeName":"Start","NodeType":"startsub","Status":"","SubflowId":"2dfb873d855e2391","SubflowName":"sub-validate-secret","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"266d18d3fef11c2b","NodeName":"Define In/Out","NodeType":"define","Status":"","SubflowId":"2dfb873d855e2391","SubflowName":"sub-validate-secret","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"3206e1fe4094ac77","NodeName":"Prepare CustomerID","NodeType":"code","Status":"","SubflowId":"2dfb873d855e2391","SubflowName":"sub-validate-secret","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"dadc486981ec0d74","NodeName":"Check Value","NodeType":"decision","Status":"","SubflowId":"2dfb873d855e2391","SubflowName":"sub-validate-secret","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"19b010a35302da84","NodeName":"End","NodeType":"endsub","Status":"","SubflowId":"2dfb873d855e2391","SubflowName":"sub-validate-secret","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"52f04873b0837e0d","NodeName":"Decrypt encCustomerID","NodeType":"code","Status":"","SubflowId":"2dfb873d855e2391","SubflowName":"sub-validate-secret","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"806efbd0d89c1bbf","NodeName":"Compare Value","NodeType":"decision","Status":"","SubflowId":"2dfb873d855e2391","SubflowName":"sub-validate-secret","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"27c5f2265df7cc07","NodeName":"Set Code 0","NodeType":"code","Status":"","SubflowId":"2dfb873d855e2391","SubflowName":"sub-validate-secret","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"f3d8eba8d08d1704","NodeName":"Set Code 100","NodeType":"code","Status":"","SubflowId":"2dfb873d855e2391","SubflowName":"sub-validate-secret","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"80da27a3c7bd3639","NodeName":"End","NodeType":"endsub","Status":"","SubflowId":"2dfb873d855e2391","SubflowName":"sub-validate-secret","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"fabcbfb6d35ba771","NodeName":"Read Setting Config","NodeType":"ssqsubflow","Status":"","SubflowId":"2dfb873d855e2391","SubflowName":"sub-validate-secret","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"2dfb873d855e2391","NodeName":"","NodeType":"tab","Status":"","SubflowId":"2dfb873d855e2391","SubflowName":"sub-validate-secret","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"b6aac101577e73f0","NodeName":"Start","NodeType":"startsub","Status":"","SubflowId":"35256fcf5dfe5b2d","SubflowName":"flow-setting-config-yaml","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"d5c2280b73b877d7","NodeName":"Default Config","NodeType":"define","Status":"","SubflowId":"35256fcf5dfe5b2d","SubflowName":"flow-setting-config-yaml","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"2136e5a4ca19fce7","NodeName":"End","NodeType":"endsub","Status":"","SubflowId":"35256fcf5dfe5b2d","SubflowName":"flow-setting-config-yaml","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"28b5e5a2c66c3df9","NodeName":"Get Config from Redis","NodeType":"ssqsubflow","Status":"","SubflowId":"35256fcf5dfe5b2d","SubflowName":"flow-setting-config-yaml","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"328ebb953cc8b39b","NodeName":"Check Not Found","NodeType":"decision","Status":"","SubflowId":"35256fcf5dfe5b2d","SubflowName":"flow-setting-config-yaml","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"90f95a0345242416","NodeName":"Merge Value from Cache","NodeType":"code","Status":"","SubflowId":"35256fcf5dfe5b2d","SubflowName":"flow-setting-config-yaml","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"35256fcf5dfe5b2d","NodeName":"","NodeType":"tab","Status":"","SubflowId":"35256fcf5dfe5b2d","SubflowName":"flow-setting-config-yaml","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"0fa8330d4183dcf6","NodeName":"Start","NodeType":"startsub","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"062424cbf7fe92bd","NodeName":"Get by redis_key","NodeType":"code","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"d083fb8aa4f14c34","NodeName":"Define In/Out","NodeType":"define","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"c14f8ca3764fe47f","NodeName":"Check Key","NodeType":"decision","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"63561b0af6cc8dac","NodeName":"Check Empty","NodeType":"decision","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"baeea740e703a752","NodeName":"End","NodeType":"endsub","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"9526fb98677b3fbe","NodeName":"Convert String to Map","NodeType":"code","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"1627fdc80db0dbcf","NodeName":"End","NodeType":"endsub","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"4a79b3d361a4baea","NodeName":"Return not_found ","NodeType":"code","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"272e53e257af83de","NodeName":"Return not_found ","NodeType":"code","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null},{"Action":"","FlowId":"472a8ae2136c0969","FlowName":"gateway-validate-token","NodeId":"d0534c8c9b38ec32","NodeName":"","NodeType":"tab","Status":"","SubflowId":"d0534c8c9b38ec32","SubflowName":"sub-get-cache-map","headerIn":null,"headerOut":null}]},"subFlows":[{"flowId":"21bbe78f7405a528","flowName":"sub-get-response-status","nodes":[{"action":"start","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"Start","foundIt":false,"h":30,"id":"739c836ace5d8f6e","ignoreNode":false,"inputs":0,"l":true,"name":"Start","nextNodes":[{"cond":"success","id":"6368f0913225461a","next":true}],"outputs":1,"processId":"1740052446492230265","processName":"sub-get-response-status-1740052446492230265","resize":false,"rules":[{"cond":""}],"scopeId":"21bbe78f7405a528","scopeType":"subFlow","type":"startsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"w":30,"wires":[["6368f0913225461a"]],"x":646.5,"y":108,"z":"21bbe78f7405a528"},{"action":"define","autoInit":true,"borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","desc":"ประกาศ Input/Output","dirty":false,"display":"Define","endNode":false,"exception":"","filterIn":[{"all":false,"children":[{"default":"Success","max":0,"min":0,"name":"description","regexp":"","required":false,"type":"string","validated":false},{"default":0,"max":0,"min":0,"name":"status","required":false,"type":"integer","validated":false}],"max":0,"min":0,"name":"status","notEmpty":true,"required":false,"type":"map","validated":false},{"default":"mob_stat_code","max":0,"min":0,"name":"redis_key","regexp":"","required":false,"type":"string","validated":false}],"filterOut":[{"all":false,"children":[{"default":"Success","max":0,"min":0,"name":"description","regexp":"","required":false,"type":"string","validated":false},{"default":0,"max":0,"min":0,"name":"status","required":false,"type":"integer","validated":false}],"max":0,"min":0,"name":"status","notEmpty":true,"required":false,"type":"map","validated":false},{"default":"mob_stat_code","max":0,"min":0,"name":"redis_key","regexp":"","required":false,"type":"string","validated":false}],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"6368f0913225461a","ignoreNode":false,"inactiveNode":false,"input":[{"children":[{"children":null,"defaultValue":"Success","expanded":true,"id":"39d022224118bf5e","input":true,"label":"description","max":0,"min":0,"name":"description","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":0,"expanded":true,"id":"436cffabeb578907","input":true,"label":"status","max":0,"min":0,"name":"status","output":true,"regexp":"","required":false,"selected":true,"sublabel":"integer","type":"integer","validated":false}],"defaultValue":null,"expanded":true,"id":"1fc5129f1d248170","input":true,"label":"status","max":0,"min":0,"name":"status","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false},{"children":null,"defaultValue":"mob_stat_code","expanded":true,"id":"186e77932b42d7ef","input":true,"label":"redis_key","max":0,"min":0,"name":"redis_key","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false}],"inputJson":"{\n    \"redis_key\": \"mob_stat_code\",\n    \"status\": {\n        \"description\": \"Success\",\n        \"status\": 0\n    }\n}","inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Define In/Out","nextNodes":[{"cond":"success","id":"c51ec00cb63dce43","next":true}],"output":[{"children":[{"children":null,"defaultValue":"Success","expanded":true,"id":"39d022224118bf5e","input":true,"label":"description","max":0,"min":0,"name":"description","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":0,"expanded":true,"id":"436cffabeb578907","input":true,"label":"status","max":0,"min":0,"name":"status","output":true,"regexp":"","required":false,"selected":true,"sublabel":"integer","type":"integer","validated":false}],"defaultValue":null,"expanded":true,"id":"1fc5129f1d248170","input":true,"label":"status","max":0,"min":0,"name":"status","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false},{"children":null,"defaultValue":"mob_stat_code","expanded":true,"id":"186e77932b42d7ef","input":true,"label":"redis_key","max":0,"min":0,"name":"redis_key","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false}],"outputs":1,"processId":"1740052446492230265","processName":"sub-get-response-status-1740052446492230265","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{\n    \"redis_key\": \"mob_stat_code\",\n    \"status\": {\n        \"description\": \"Success\",\n        \"status\": 0\n    }\n}","scopeId":"21bbe78f7405a528","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.name}}\n# {{.exception}}\n# {{.id}}\n# {{.type}}\n# {{.autoInit}}\n# {{.desc}}\n# {{.moved}}\n# {{.display}}\n\n### Databus Parameter ### \n#{}\n","type":"define","useFilterIn":false,"useFilterOut":false,"valid":true,"validationErrors":[],"w":150,"wires":[["c51ec00cb63dce43"]],"x":648.5,"y":233,"z":"21bbe78f7405a528"},{"action":"subflow","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","desc":"ดึงค่า Status ต่างๆ ของ Mobile จาก Redis","dirty":false,"display":"Subflow","endNode":false,"exception":"","exposedAll":false,"filterIn":[{"default":null,"max":0,"min":0,"name":"redis_key","regexp":"","required":false,"type":"string","validated":false}],"filterOut":[{"default":null,"name":"not_found","required":false,"type":"boolean","validated":false},{"all":true,"default":"{}","max":0,"min":0,"name":"result","required":false,"type":"map","validated":false}],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"db32180fd190e12a","ignoreNode":false,"inactiveNode":false,"input":[{"children":null,"defaultValue":null,"expanded":true,"id":"2d31f03a5db0c27c","input":true,"label":"redis_key","max":0,"min":0,"name":"redis_key","output":false,"regexp":"","required":false,"selected":false,"sublabel":"string","type":"string","validated":false}],"inputJson":"{\n    \"redis_key\": \"\"\n}","inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Get Moble Status","nextNodes":[{"cond":"success","id":"6933862f31606bee","next":true}],"output":[{"children":null,"defaultValue":null,"expanded":true,"id":"1c62b768b01fca19","input":false,"label":"not_found","max":0,"min":0,"name":"not_found","output":true,"regexp":"","required":false,"selected":false,"sublabel":"boolean","type":"boolean","validated":false},{"children":null,"defaultValue":null,"expanded":true,"id":"0b7561732955112a","input":false,"label":"result","max":0,"min":0,"name":"result","output":true,"regexp":"","required":false,"selected":false,"sublabel":"map","type":"map","validated":false}],"outputs":1,"processId":"1740052446492230265","processName":"sub-get-response-status-1740052446492230265","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{\n    \"redis_key\": \"\"\n}","scopeId":"21bbe78f7405a528","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.subflowId}}\n# {{.type}}\n# {{.exception}}\n# {{.desc}}\n# {{.moved}}\n# {{.id}}\n# {{.exposedAll}}\n# {{.name}}\n# {{.display}}\n\n### Databus Parameter ### \n#{}\n","subflow":true,"subflowId":"d0534c8c9b38ec32","type":"ssqsubflow","useFilterIn":true,"useFilterOut":true,"valid":true,"validationErrors":[],"w":180,"wires":[["6933862f31606bee"]],"x":779.5,"y":532,"z":"21bbe78f7405a528"},{"action":"decision","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","decision-field-dataBus-container-div":"","desc":"ตรวจสอบว่าเจอค่า config","dirty":false,"display":"Decision","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"6933862f31606bee","ignoreNode":false,"inactiveNode":false,"input":[],"inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Check Not Found","nextNodes":[{"cond":"not_found","id":"4062e781c0f60f40","next":true},{"cond":"else","id":"71a09c53e2ebd8dc","next":true}],"output":[],"outputs":2,"postEzCode":"","preEzCode":"","processId":"1740052446492230265","processName":"sub-get-response-status-1740052446492230265","resize":false,"rule-container":"","rules":[{"cond":"not_found"},{"cond":"else"}],"scopeId":"21bbe78f7405a528","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.preEzCode}}\n# {{.moved}}\n# {{.postEzCode}}\n# {{.name}}\n# {{.desc}}\n# {{.display}}\n# {{.exception}}\n# {{.id}}\n# {{.type}}\n# {{.uuid}}\n\n### Databus Parameter ### \n#{}\n","type":"decision","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"w":180,"wires":[["4062e781c0f60f40"],["71a09c53e2ebd8dc"]],"x":779.5,"y":662,"z":"21bbe78f7405a528"},{"action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"let msgObj = this.result.get(this.status.status.string()).or({})\n\nroot.edescript = $msgObj.edescript\nroot.tdescript = $msgObj.tdescript\n","color":"#ffffff","desc":"","dirty":false,"display":"Code","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"71a09c53e2ebd8dc","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Get code from result","nextNodes":[{"cond":"success","id":"a822da09b4ad910a","next":true}],"output":[],"outputs":1,"processId":"1740052446492230265","processName":"sub-get-response-status-1740052446492230265","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"21bbe78f7405a528","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.type}}\n# {{.display}}\n# {{.desc}}\n# {{.id}}\n# {{.moved}}\n# {{.name}}\n# {{.uuid}}\n# {{.code}}\n# {{.exception}}\n\n### Databus Parameter ### \n#{}\n","type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"w":200,"wires":[["a822da09b4ad910a"]],"x":901.5,"y":830,"z":"21bbe78f7405a528"},{"action":"decision","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","decision-field-dataBus-container-div":" ","desc":"ถ้าสถานะเป็น 0 ให้ return success","dirty":false,"display":"Decision","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"c51ec00cb63dce43","ignoreNode":false,"inactiveNode":false,"input":[],"inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Check Status 0","nextNodes":[{"cond":"this.status.status == 0","id":"95aa979be502fc8d","next":true},{"cond":"else","id":"db32180fd190e12a","next":true}],"output":[],"outputs":2,"postEzCode":"","preEzCode":"","processId":"1740052446492230265","processName":"sub-get-response-status-1740052446492230265","resize":false,"rule-container":" ","rules":[{"cond":"this.status.status == 0"},{"cond":"else"}],"scopeId":"21bbe78f7405a528","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.id}}\n# {{.postEzCode}}\n# {{.exception}}\n# {{.type}}\n# {{.uuid}}\n# {{.desc}}\n# {{.endNode}}\n# {{.decision-field-dataBus-container-div}}\n# {{.flipNode}}\n# {{.display}}\n# {{.moved}}\n# {{.preEzCode}}\n# {{.name}}\n# {{.rule-container}}\n# {{.inactiveNode}}\n\n### Databus Parameter ### \n#{}\n","type":"decision","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"w":160,"wires":[["95aa979be502fc8d"],["db32180fd190e12a"]],"x":649.5,"y":368,"z":"21bbe78f7405a528"},{"action":"end","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"End","foundIt":false,"h":30,"id":"95aa979be502fc8d","ignoreNode":false,"inputs":1,"l":true,"name":"End","nextNodes":[],"outPort":0,"outputs":0,"processId":"1740052446492230265","processName":"sub-get-response-status-1740052446492230265","resize":false,"scopeId":"21bbe78f7405a528","scopeType":"subFlow","type":"endsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"w":30,"wires":[],"x":522.5,"y":520,"z":"21bbe78f7405a528"},{"action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"root.status.description = \"Error\"","color":"#FFAAAA","desc":"เอา description default เป็น error","dirty":false,"display":"Code","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"4062e781c0f60f40","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Set Default Error","nextNodes":[{"cond":"success","id":"3131321a41654a30","next":true}],"output":[],"outputs":1,"processId":"1740052446492230265","processName":"sub-get-response-status-1740052446492230265","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"21bbe78f7405a528","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.type}}\n# {{.display}}\n# {{.desc}}\n# {{.id}}\n# {{.moved}}\n# {{.name}}\n# {{.uuid}}\n# {{.code}}\n# {{.exception}}\n\n### Databus Parameter ### \n#{}\n","type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"w":160,"wires":[["3131321a41654a30"]],"x":634,"y":830,"z":"21bbe78f7405a528"},{"action":"end","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"End","foundIt":false,"h":30,"id":"3131321a41654a30","ignoreNode":false,"inputs":1,"l":true,"name":"End","nextNodes":[],"outPort":0,"outputs":0,"processId":"1740052446492230265","processName":"sub-get-response-status-1740052446492230265","resize":false,"scopeId":"21bbe78f7405a528","scopeType":"subFlow","type":"endsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"w":30,"wires":[],"x":634,"y":950,"z":"21bbe78f7405a528"},{"action":"decision","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","decision-field-dataBus-container-div":" ","desc":"ตรวจสอบ Message ว่าจะคืนค่าไหนไปดี","dirty":false,"display":"Decision","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"a822da09b4ad910a","ignoreNode":false,"inactiveNode":false,"input":[],"inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Check Message","nextNodes":[{"cond":"this.edescript != null \u0026\u0026 this.edescript != \"\"","id":"2d82568866dec78d","next":true},{"cond":"this.tdescript != null \u0026\u0026 this.tdescript != \"\"","id":"2838a7131ec82165","next":true},{"cond":"else","id":"223b912717d285bc","next":true}],"output":[],"outputs":3,"postEzCode":"","preEzCode":"","processId":"1740052446492230265","processName":"sub-get-response-status-1740052446492230265","resize":false,"rule-container":" ","rules":[{"cond":"this.edescript != null \u0026\u0026 this.edescript != \"\""},{"cond":"this.tdescript != null \u0026\u0026 this.tdescript != \"\""},{"cond":"else"}],"scopeId":"21bbe78f7405a528","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.endNode}}\n# {{.exception}}\n# {{.postEzCode}}\n# {{.type}}\n# {{.flipNode}}\n# {{.inactiveNode}}\n# {{.name}}\n# {{.moved}}\n# {{.display}}\n# {{.id}}\n# {{.desc}}\n# {{.uuid}}\n# {{.decision-field-dataBus-container-div}}\n# {{.rule-container}}\n# {{.preEzCode}}\n\n### Databus Parameter ### \n#{}\n","type":"decision","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"w":160,"wires":[["2d82568866dec78d"],["2838a7131ec82165"],["223b912717d285bc"]],"x":901.5,"y":964,"z":"21bbe78f7405a528"},{"Filter":" ","action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"root.status.description = this.edescript","color":"#ffffff","dataBusCode":" ","desc":"ให้ message เป็น english","dirty":false,"display":"Code","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"2d82568866dec78d","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"English Message","nextNodes":[{"cond":"success","id":"43d99f5f22ade171","next":true}],"output":[],"outputs":1,"processId":"1740052446492230265","processName":"sub-get-response-status-1740052446492230265","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"21bbe78f7405a528","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.display}}\n# {{.name}}\n# {{.codeEditor}}\n# {{.moved}}\n# {{.endNode}}\n# {{.id}}\n# {{.uuid}}\n# {{.code}}\n# {{.Filter}}\n# {{.exception}}\n# {{.desc}}\n# {{.inactiveNode}}\n# {{.dataBusCode}}\n# {{.type}}\n# {{.flipNode}}\n\n### Databus Parameter ### \n#{}\n","type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"w":180,"wires":[["43d99f5f22ade171"]],"x":691.5,"y":1101,"z":"21bbe78f7405a528"},{"Filter":" ","action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"root.status.description = this.tdescript","color":"#ffffff","dataBusCode":" ","desc":"ให้ message เป็น Thai","dirty":false,"display":"Code","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"2838a7131ec82165","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Thai Message","nextNodes":[{"cond":"success","id":"43d99f5f22ade171","next":true}],"output":[],"outputs":1,"processId":"1740052446492230265","processName":"sub-get-response-status-1740052446492230265","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"21bbe78f7405a528","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.display}}\n# {{.name}}\n# {{.codeEditor}}\n# {{.moved}}\n# {{.endNode}}\n# {{.id}}\n# {{.uuid}}\n# {{.code}}\n# {{.Filter}}\n# {{.exception}}\n# {{.desc}}\n# {{.inactiveNode}}\n# {{.dataBusCode}}\n# {{.type}}\n# {{.flipNode}}\n\n### Databus Parameter ### \n#{}\n","type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"w":160,"wires":[["43d99f5f22ade171"]],"x":901,"y":1103,"z":"21bbe78f7405a528"},{"action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"root.status.description = \"Error\"","color":"#FFAAAA","desc":"เอา description default เป็น error","dirty":false,"display":"Code","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"223b912717d285bc","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Set Default Error","nextNodes":[{"cond":"success","id":"43d99f5f22ade171","next":true}],"output":[],"outputs":1,"processId":"1740052446492230265","processName":"sub-get-response-status-1740052446492230265","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"21bbe78f7405a528","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.type}}\n# {{.display}}\n# {{.desc}}\n# {{.id}}\n# {{.moved}}\n# {{.name}}\n# {{.uuid}}\n# {{.code}}\n# {{.exception}}\n\n### Databus Parameter ### \n#{}\n","type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"w":160,"wires":[["43d99f5f22ade171"]],"x":1096,"y":1104,"z":"21bbe78f7405a528"},{"action":"end","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"End","foundIt":false,"h":30,"id":"43d99f5f22ade171","ignoreNode":false,"inputs":1,"l":true,"name":"End","nextNodes":[],"outPort":0,"outputs":0,"processId":"1740052446492230265","processName":"sub-get-response-status-1740052446492230265","resize":false,"scopeId":"21bbe78f7405a528","scopeType":"subFlow","type":"endsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"w":30,"wires":[],"x":901,"y":1258,"z":"21bbe78f7405a528"},{"id":"21bbe78f7405a528","ignoreNode":true,"info":"","label":"sub-get-response-status","scopeId":"21bbe78f7405a528","scopeType":"subFlow","teamSharing":"Read-Write","type":"tab"}],"startNodeId":"739c836ace5d8f6e"},{"flowId":"d0534c8c9b38ec32","flowName":"sub-get-cache-map","nodes":[{"action":"start","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"Start","execTime":0,"foundIt":false,"h":30,"id":"0fa8330d4183dcf6","ignoreNode":false,"inputs":0,"l":true,"name":"Start","nextNodes":[{"cond":"success","id":"d083fb8aa4f14c34","next":true}],"outputs":1,"processId":"1740052446492497935","processName":"sub-get-cache-map-1740052446492497935","resize":false,"rules":[{"cond":""}],"scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","testFailed":false,"testPassed":false,"testing":false,"type":"startsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[["d083fb8aa4f14c34"]],"x":669.5,"y":120,"z":"d0534c8c9b38ec32"},{"action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"hp_redis_cmd:\n  profile: |-\n    {{hyper_ibank_redis_config}}\n  command: get\n  args_mapping: root = [ this.redis_key ]\n  input: |\n    root = this\n\n  result_mode: merge\n\n  output: |\n    root = {}\n    root.strResult = this","color":"#ffffff","desc":"","dirty":false,"display":"Code","endNode":false,"exception":"custom","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"062424cbf7fe92bd","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":true,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Get by redis_key","nextNodes":[{"cond":"success","id":"63561b0af6cc8dac","next":true},{"cond":"exception","id":"272e53e257af83de","next":true}],"output":[],"outputs":2,"processId":"1740052446492497935","processName":"sub-get-cache-map-1740052446492497935","resize":false,"rules":[{"cond":"success"},{"cond":"exception"}],"sampleResult":"{}","scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.type}}\n# {{.code}}\n# {{.exception}}\n# {{.name}}\n# {{.uuid}}\n# {{.display}}\n# {{.moved}}\n# {{.desc}}\n# {{.id}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":180,"wires":[["63561b0af6cc8dac"],["272e53e257af83de"]],"x":532.5,"y":474,"z":"d0534c8c9b38ec32"},{"action":"define","autoInit":true,"borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","desc":"","dirty":false,"display":"Define","endNode":false,"exception":"","execTime":0,"filterIn":[{"default":false,"name":"not_found","required":false,"type":"boolean","validated":false},{"default":"","max":0,"min":0,"name":"redis_key","regexp":"","required":false,"type":"string","validated":false},{"default":true,"name":"in_cache_value","required":false,"type":"boolean","validated":false},{"all":true,"default":"{}","max":0,"min":0,"name":"result","notEmpty":true,"required":false,"type":"map","validated":false}],"filterOut":[{"default":false,"name":"not_found","required":false,"type":"boolean","validated":false},{"default":"","max":0,"min":0,"name":"redis_key","regexp":"","required":false,"type":"string","validated":false},{"default":true,"name":"in_cache_value","required":false,"type":"boolean","validated":false},{"all":true,"default":"{}","max":0,"min":0,"name":"result","notEmpty":true,"required":false,"type":"map","validated":false}],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"d083fb8aa4f14c34","ignoreNode":false,"inactiveNode":false,"input":[{"children":null,"defaultValue":false,"expanded":true,"id":"1c62b768b01fca19","input":true,"label":"not_found","max":0,"min":0,"name":"not_found","output":true,"regexp":"","required":false,"selected":true,"sublabel":"boolean","type":"boolean","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"2d31f03a5db0c27c","input":true,"label":"redis_key","max":0,"min":0,"name":"redis_key","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":true,"expanded":true,"id":"16eb937d6a85a1d4","input":true,"label":"in_cache_value","max":0,"min":0,"name":"in_cache_value","output":true,"regexp":"","required":false,"selected":true,"sublabel":"boolean","type":"boolean","validated":false},{"children":[],"defaultValue":null,"expanded":true,"id":"0b7561732955112a","input":true,"label":"result","max":0,"min":0,"name":"result","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false}],"inputJson":"{\n    \"not_found\": false,\n    \"redis_key\": \"\",\n    \"in_cache_value\": true,\n    \"result\": {}\n}","inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Define In/Out","nextNodes":[{"cond":"success","id":"c14f8ca3764fe47f","next":true}],"output":[{"children":null,"defaultValue":false,"expanded":true,"id":"1c62b768b01fca19","input":true,"label":"not_found","max":0,"min":0,"name":"not_found","output":true,"regexp":"","required":false,"selected":true,"sublabel":"boolean","type":"boolean","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"2d31f03a5db0c27c","input":true,"label":"redis_key","max":0,"min":0,"name":"redis_key","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":true,"expanded":true,"id":"16eb937d6a85a1d4","input":true,"label":"in_cache_value","max":0,"min":0,"name":"in_cache_value","output":true,"regexp":"","required":false,"selected":true,"sublabel":"boolean","type":"boolean","validated":false},{"children":[],"defaultValue":null,"expanded":true,"id":"0b7561732955112a","input":true,"label":"result","max":0,"min":0,"name":"result","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false}],"outputs":1,"processId":"1740052446492497935","processName":"sub-get-cache-map-1740052446492497935","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{\n    \"not_found\": false,\n    \"redis_key\": \"\",\n    \"in_cache_value\": true,\n    \"result\": {}\n}","scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.display}}\n# {{.type}}\n# {{.moved}}\n# {{.exception}}\n# {{.autoInit}}\n# {{.name}}\n# {{.desc}}\n# {{.id}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"define","useFilterIn":false,"useFilterOut":false,"valid":true,"validationErrors":[],"vertical":true,"w":150,"wires":[["c14f8ca3764fe47f"]],"x":669.5,"y":224,"z":"d0534c8c9b38ec32"},{"action":"decision","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","decision-field-dataBus-container-div":"","desc":"","dirty":false,"display":"Decision","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"c14f8ca3764fe47f","ignoreNode":false,"inactiveNode":false,"input":[],"inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Check Key","nextNodes":[{"cond":"redis_key != null \u0026\u0026 redis_key != \"\"","id":"062424cbf7fe92bd","next":true},{"cond":"else","id":"272e53e257af83de","next":true}],"output":[],"outputs":2,"postEzCode":"","preEzCode":"","processId":"1740052446492497935","processName":"sub-get-cache-map-1740052446492497935","resize":false,"rule-container":"","rules":[{"cond":"redis_key != null \u0026\u0026 redis_key != \"\""},{"cond":"else"}],"scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.uuid}}\n# {{.preEzCode}}\n# {{.id}}\n# {{.postEzCode}}\n# {{.display}}\n# {{.exception}}\n# {{.desc}}\n# {{.type}}\n# {{.moved}}\n# {{.name}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"decision","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":150,"wires":[["062424cbf7fe92bd"],["272e53e257af83de"]],"x":669.5,"y":339,"z":"d0534c8c9b38ec32"},{"action":"decision","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","decision-field-dataBus-container-div":" ","desc":"","dirty":false,"display":"Decision","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"63561b0af6cc8dac","ignoreNode":false,"inactiveNode":false,"input":[],"inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Check Empty","nextNodes":[{"cond":"strResult != null \u0026\u0026 strResult != \"\"","id":"9526fb98677b3fbe","next":true},{"cond":"else","id":"4a79b3d361a4baea","next":true}],"output":[],"outputs":2,"postEzCode":"","preEzCode":"","processId":"1740052446492497935","processName":"sub-get-cache-map-1740052446492497935","resize":false,"rule-container":" ","rules":[{"cond":"strResult != null \u0026\u0026 strResult != \"\""},{"cond":"else"}],"scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.inactiveNode}}\n# {{.endNode}}\n# {{.moved}}\n# {{.postEzCode}}\n# {{.exception}}\n# {{.id}}\n# {{.name}}\n# {{.type}}\n# {{.display}}\n# {{.rule-container}}\n# {{.flipNode}}\n# {{.preEzCode}}\n# {{.uuid}}\n# {{.desc}}\n# {{.decision-field-dataBus-container-div}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"decision","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":160,"wires":[["9526fb98677b3fbe"],["4a79b3d361a4baea"]],"x":678.5,"y":614,"z":"d0534c8c9b38ec32"},{"action":"end","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"End","execTime":0,"foundIt":false,"h":30,"id":"baeea740e703a752","ignoreNode":false,"inputs":1,"l":true,"name":"End","nextNodes":[],"outPort":0,"outputs":0,"processId":"1740052446492497935","processName":"sub-get-cache-map-1740052446492497935","resize":false,"scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","testFailed":false,"testPassed":false,"testing":false,"type":"endsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[],"x":672.5,"y":939,"z":"d0534c8c9b38ec32"},{"Filter":" ","action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"let jsonTmp = this.strResult.parse_json().or({})\nroot.result = if in_cache_value == true { $jsonTmp.cache_value } else { $jsonTmp }","color":"#ffffff","dataBusCode":" ","desc":"","dirty":false,"display":"Code","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"9526fb98677b3fbe","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Convert String to Map","nextNodes":[{"cond":"success","id":"baeea740e703a752","next":true}],"output":[],"outputs":1,"processId":"1740052446492497935","processName":"sub-get-cache-map-1740052446492497935","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.endNode}}\n# {{.type}}\n# {{.moved}}\n# {{.inactiveNode}}\n# {{.uuid}}\n# {{.flipNode}}\n# {{.id}}\n# {{.dataBusCode}}\n# {{.name}}\n# {{.codeEditor}}\n# {{.desc}}\n# {{.exception}}\n# {{.display}}\n# {{.Filter}}\n# {{.code}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":200,"wires":[["baeea740e703a752"]],"x":552.5,"y":781,"z":"d0534c8c9b38ec32"},{"action":"end","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"End","execTime":0,"foundIt":false,"h":30,"id":"1627fdc80db0dbcf","ignoreNode":false,"inputs":1,"l":true,"name":"End","nextNodes":[],"outPort":0,"outputs":0,"processId":"1740052446492497935","processName":"sub-get-cache-map-1740052446492497935","resize":false,"scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","testFailed":false,"testPassed":false,"testing":false,"type":"endsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[],"x":831.5,"y":605,"z":"d0534c8c9b38ec32"},{"Filter":" ","action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"not_found = true","color":"#ffffff","dataBusCode":" ","desc":"","dirty":false,"display":"Code","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"4a79b3d361a4baea","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Return not_found ","nextNodes":[{"cond":"success","id":"baeea740e703a752","next":true}],"output":[],"outputs":1,"processId":"1740052446492497935","processName":"sub-get-cache-map-1740052446492497935","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.endNode}}\n# {{.Filter}}\n# {{.inactiveNode}}\n# {{.display}}\n# {{.uuid}}\n# {{.name}}\n# {{.dataBusCode}}\n# {{.desc}}\n# {{.exception}}\n# {{.moved}}\n# {{.flipNode}}\n# {{.codeEditor}}\n# {{.id}}\n# {{.code}}\n# {{.type}}\n\n### Databus Parameter ### \n#{}\n","type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":180,"wires":[["baeea740e703a752"]],"x":790.5,"y":781,"z":"d0534c8c9b38ec32"},{"Filter":" ","action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"not_found = true","color":"#ffffff","dataBusCode":" ","desc":"","dirty":false,"display":"Code","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"272e53e257af83de","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Return not_found ","nextNodes":[{"cond":"success","id":"1627fdc80db0dbcf","next":true}],"output":[],"outputs":1,"processId":"1740052446492497935","processName":"sub-get-cache-map-1740052446492497935","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.endNode}}\n# {{.Filter}}\n# {{.inactiveNode}}\n# {{.display}}\n# {{.uuid}}\n# {{.name}}\n# {{.dataBusCode}}\n# {{.desc}}\n# {{.exception}}\n# {{.moved}}\n# {{.flipNode}}\n# {{.codeEditor}}\n# {{.id}}\n# {{.code}}\n# {{.type}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":180,"wires":[["1627fdc80db0dbcf"]],"x":832,"y":482,"z":"d0534c8c9b38ec32"},{"id":"d0534c8c9b38ec32","ignoreNode":true,"info":"","label":"sub-get-cache-map","scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","teamSharing":"Read-Write","type":"tab"}],"startNodeId":"0fa8330d4183dcf6"},{"flowId":"de9f5d6922628783","flowName":"flow-validate-token","nodes":[{"action":"start","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"Start","foundIt":false,"h":30,"id":"52e8c70785f341a3","ignoreNode":false,"inputs":0,"l":true,"name":"Start","nextNodes":[{"cond":"success","id":"4c997e25c80a7e0b","next":true}],"outputs":1,"processId":"1740052446492628057","processName":"flow-validate-token-1740052446492628057","resize":false,"rules":[{"cond":""}],"scopeId":"de9f5d6922628783","scopeType":"subFlow","type":"startsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[["4c997e25c80a7e0b"]],"x":672.5,"y":107,"z":"de9f5d6922628783"},{"action":"define","autoInit":true,"borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","desc":"ประกาศ Input/Output","dirty":false,"display":"Define","endNode":false,"exception":"","filterIn":[{"default":"aBcDeFgHiJkLmNoPqRsTuVwXyZ#$0123","max":0,"min":0,"name":"fix_key_01","regexp":"","required":false,"type":"string","validated":false},{"default":"","max":0,"min":0,"name":"token","regexp":"","required":false,"type":"string","validated":false},{"all":true,"default":"{}","max":0,"min":0,"name":"token_header","notEmpty":true,"required":false,"type":"map","validated":false},{"all":true,"default":"{}","max":0,"min":0,"name":"token_payload","notEmpty":true,"required":false,"type":"map","validated":false},{"default":100,"max":0,"min":0,"name":"code","required":false,"type":"integer","validated":false}],"filterOut":[{"default":"aBcDeFgHiJkLmNoPqRsTuVwXyZ#$0123","max":0,"min":0,"name":"fix_key_01","regexp":"","required":false,"type":"string","validated":false},{"default":"","max":0,"min":0,"name":"token","regexp":"","required":false,"type":"string","validated":false},{"all":true,"default":"{}","max":0,"min":0,"name":"token_header","notEmpty":true,"required":false,"type":"map","validated":false},{"all":true,"default":"{}","max":0,"min":0,"name":"token_payload","notEmpty":true,"required":false,"type":"map","validated":false},{"default":100,"max":0,"min":0,"name":"code","required":false,"type":"integer","validated":false}],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"4c997e25c80a7e0b","ignoreNode":false,"inactiveNode":false,"input":[{"children":null,"defaultValue":"aBcDeFgHiJkLmNoPqRsTuVwXyZ#$0123","expanded":true,"id":"35ef3e77ba9429aa","input":true,"label":"fix_key_01","max":0,"min":0,"name":"fix_key_01","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"443b8205d3d4ee48","input":true,"label":"token","max":0,"min":0,"name":"token","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":[],"defaultValue":null,"expanded":true,"id":"2ad5f5f3d6d2d9c0","input":true,"label":"token_header","max":0,"min":0,"name":"token_header","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false},{"children":[],"defaultValue":null,"expanded":true,"id":"3eef2722bc4ee376","input":true,"label":"token_payload","max":0,"min":0,"name":"token_payload","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false},{"children":null,"defaultValue":100,"expanded":true,"id":"189dda2d777f90d9","input":true,"label":"code","max":0,"min":0,"name":"code","output":true,"regexp":"","required":false,"selected":true,"sublabel":"integer","type":"integer","validated":false}],"inputJson":"{\n    \"fix_key_01\": \"aBcDeFgHiJkLmNoPqRsTuVwXyZ#$0123\",\n    \"token\": \"\",\n    \"token_header\": {},\n    \"token_payload\": {},\n    \"code\": 100\n}","inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Define In/Out","nextNodes":[{"cond":"success","id":"83696a642b3cecec","next":true}],"output":[{"children":null,"defaultValue":"aBcDeFgHiJkLmNoPqRsTuVwXyZ#$0123","expanded":true,"id":"35ef3e77ba9429aa","input":true,"label":"fix_key_01","max":0,"min":0,"name":"fix_key_01","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"443b8205d3d4ee48","input":true,"label":"token","max":0,"min":0,"name":"token","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":[],"defaultValue":null,"expanded":true,"id":"2ad5f5f3d6d2d9c0","input":true,"label":"token_header","max":0,"min":0,"name":"token_header","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false},{"children":[],"defaultValue":null,"expanded":true,"id":"3eef2722bc4ee376","input":true,"label":"token_payload","max":0,"min":0,"name":"token_payload","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false},{"children":null,"defaultValue":100,"expanded":true,"id":"189dda2d777f90d9","input":true,"label":"code","max":0,"min":0,"name":"code","output":true,"regexp":"","required":false,"selected":true,"sublabel":"integer","type":"integer","validated":false}],"outputs":1,"processId":"1740052446492628057","processName":"flow-validate-token-1740052446492628057","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{\n    \"fix_key_01\": \"aBcDeFgHiJkLmNoPqRsTuVwXyZ#$0123\",\n    \"token\": \"\",\n    \"token_header\": {},\n    \"token_payload\": {},\n    \"code\": 100\n}","scopeId":"de9f5d6922628783","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.type}}\n# {{.desc}}\n# {{.autoInit}}\n# {{.id}}\n# {{.name}}\n# {{.exception}}\n# {{.display}}\n# {{.moved}}\n\n### Databus Parameter ### \n#{}\n","type":"define","useFilterIn":false,"useFilterOut":false,"valid":true,"validationErrors":[],"vertical":true,"w":150,"wires":[["83696a642b3cecec"]],"x":672.5,"y":219,"z":"de9f5d6922628783"},{"action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"hp_transform:\n    name: \"Convert\"\n    input: |\n        root = this\n\n    mapping: |\n        root = {}\n        root.tkDecrypted = this.token.gcm_decode(this.fix_key_01.string(), this.token.string(), -1).or(\"\")\n\n    result_mode: merge \n    \n    output: |\n        root = {}\n        root.tkArr = this.tkDecrypted.split(\".\")\n    \n    ","color":"#ffffff","desc":"เปลี่ยนให้เป็น JWT Token","dirty":false,"display":"Code","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"2115f74c603bfb76","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":true,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"To JWT Token","nextNodes":[{"cond":"success","id":"d86b3ee5a75f1126","next":true}],"output":[],"outputs":1,"processId":"1740052446492628057","processName":"flow-validate-token-1740052446492628057","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"de9f5d6922628783","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.exception}}\n# {{.desc}}\n# {{.display}}\n# {{.id}}\n# {{.type}}\n# {{.code}}\n# {{.uuid}}\n# {{.name}}\n# {{.moved}}\n\n### Databus Parameter ### \n#{}\n","type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":160,"wires":[["d86b3ee5a75f1126"]],"x":671.5,"y":491,"z":"de9f5d6922628783"},{"action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"hp_transform:\n    name: \"Convert\"\n    input: |\n        root = this\n\n    mapping: |\n        root = {}\n        root.header = this.tkArr.index(0).decode(\"base64\")\n        root.payload = this.tkArr.index(1).decode(\"base64\")\n\n    result_mode: merge  \n    \n    output: |\n        root = {}\n        root.token_header = this.header.parse_json()\n        root.token_payload = this.payload.parse_json()\n    ","color":"#ffffff","desc":"แปลง token เป็นข้อมูลที่อ่านรู้เรื่อง","dirty":false,"display":"Code","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"d2010b915b280273","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":true,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Token to Data","nextNodes":[{"cond":"success","id":"1ffbb645ceccf559","next":true}],"output":[],"outputs":1,"processId":"1740052446492628057","processName":"flow-validate-token-1740052446492628057","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"de9f5d6922628783","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.exception}}\n# {{.desc}}\n# {{.display}}\n# {{.id}}\n# {{.type}}\n# {{.code}}\n# {{.uuid}}\n# {{.name}}\n# {{.moved}}\n\n### Databus Parameter ### \n#{}\n","type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":160,"wires":[["1ffbb645ceccf559"]],"x":785,"y":780,"z":"de9f5d6922628783"},{"action":"decision","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","decision-field-dataBus-container-div":"","desc":"ตรวจสอบ JWT Token ว่าถุกหรือไม่","dirty":false,"display":"Decision","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"d86b3ee5a75f1126","ignoreNode":false,"inactiveNode":false,"input":[],"inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Check JWT Token","nextNodes":[{"cond":"tkArr.length() \u003c 2","id":"c55e50cad425ce60","next":true},{"cond":"else","id":"d2010b915b280273","next":true}],"output":[],"outputs":2,"postEzCode":"","preEzCode":"","processId":"1740052446492628057","processName":"flow-validate-token-1740052446492628057","resize":false,"rule-container":"","rules":[{"cond":"tkArr.length() \u003c 2"},{"cond":"else"}],"scopeId":"de9f5d6922628783","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.preEzCode}}\n# {{.uuid}}\n# {{.desc}}\n# {{.id}}\n# {{.type}}\n# {{.exception}}\n# {{.postEzCode}}\n# {{.display}}\n# {{.moved}}\n# {{.name}}\n\n### Databus Parameter ### \n#{}\n","type":"decision","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":180,"wires":[["c55e50cad425ce60"],["d2010b915b280273"]],"x":671.5,"y":614,"z":"de9f5d6922628783"},{"action":"end","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"End","foundIt":false,"h":30,"id":"34725811f261bc2b","ignoreNode":false,"inputs":1,"l":true,"name":"End","nextNodes":[],"outPort":0,"outputs":0,"processId":"1740052446492628057","processName":"flow-validate-token-1740052446492628057","resize":false,"scopeId":"de9f5d6922628783","scopeType":"subFlow","type":"endsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[],"x":920.5,"y":1606,"z":"de9f5d6922628783"},{"action":"draft","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","desc":"ดึงข้อมูล customerId จาก secret แล้วถอดรหัสออกมา","dirty":false,"display":"Draft","endNode":false,"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"9498e7133455ad86","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Decrypt customerID","nextNodes":[{"cond":"success","id":"34725811f261bc2b","next":true}],"outputs":1,"processId":"1740052446492628057","processName":"flow-validate-token-1740052446492628057","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"de9f5d6922628783","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.transformTo}}\n# {{.moved}}\n# {{.display}}\n# {{.id}}\n# {{.type}}\n# {{.uuid}}\n# {{.desc}}\n# {{.name}}\n\n### Databus Parameter ### \n#{}\n","transformTo":"","type":"draft","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":200,"wires":[["34725811f261bc2b"]],"x":920.5,"y":1468,"z":"de9f5d6922628783"},{"action":"subflow","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","desc":"","dirty":false,"display":"Subflow","endNode":false,"exception":"","exposedAll":false,"filterIn":[{"default":null,"max":0,"min":0,"name":"redis_key","regexp":"","required":false,"type":"string","validated":false}],"filterOut":[{"default":null,"name":"not_found","required":false,"type":"boolean","validated":false},{"all":true,"default":"{}","max":0,"min":0,"name":"result","required":false,"type":"map","validated":false}],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"2a912193f54b8581","ignoreNode":false,"inactiveNode":false,"input":[{"children":null,"defaultValue":null,"expanded":true,"id":"2d31f03a5db0c27c","input":true,"label":"redis_key","max":0,"min":0,"name":"redis_key","output":false,"regexp":"","required":false,"selected":false,"sublabel":"string","type":"string","validated":false}],"inputJson":"{\n    \"redis_key\": \"\"\n}","inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Read Key in Cache","nextNodes":[{"cond":"success","id":"881282aad889433d","next":true}],"output":[{"children":null,"defaultValue":null,"expanded":true,"id":"1c62b768b01fca19","input":false,"label":"not_found","max":0,"min":0,"name":"not_found","output":true,"regexp":"","required":false,"selected":false,"sublabel":"boolean","type":"boolean","validated":false},{"children":null,"defaultValue":null,"expanded":true,"id":"0b7561732955112a","input":false,"label":"result","max":0,"min":0,"name":"result","output":true,"regexp":"","required":false,"selected":false,"sublabel":"map","type":"map","validated":false}],"outputs":1,"processId":"1740052446492628057","processName":"flow-validate-token-1740052446492628057","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{\n    \"redis_key\": \"\"\n}","scopeId":"de9f5d6922628783","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.exposedAll}}\n# {{.id}}\n# {{.name}}\n# {{.exception}}\n# {{.moved}}\n# {{.desc}}\n# {{.display}}\n# {{.type}}\n# {{.subflowId}}\n\n### Databus Parameter ### \n#{}\n","subflow":true,"subflowId":"d0534c8c9b38ec32","type":"ssqsubflow","useFilterIn":true,"useFilterOut":true,"valid":true,"validationErrors":[],"vertical":true,"w":180,"wires":[["881282aad889433d"]],"x":786.5,"y":1034,"z":"de9f5d6922628783"},{"Filter":" ","action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"root.redis_key = \"token_api_\" + this.token_payload.jti.or(\"EMPTY\")","color":"#ffffff","dataBusCode":" ","desc":"สร้าง Key เพื่อไปหยิบค่ามาตรวจสอบ","dirty":false,"display":"Code","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"1ffbb645ceccf559","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Make Redis Key","nextNodes":[{"cond":"success","id":"2a912193f54b8581","next":true}],"output":[],"outputs":1,"processId":"1740052446492628057","processName":"flow-validate-token-1740052446492628057","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"de9f5d6922628783","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.moved}}\n# {{.name}}\n# {{.uuid}}\n# {{.dataBusCode}}\n# {{.Filter}}\n# {{.code}}\n# {{.codeEditor}}\n# {{.type}}\n# {{.id}}\n# {{.exception}}\n# {{.display}}\n# {{.desc}}\n\n### Databus Parameter ### \n#{}\n","type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":160,"wires":[["2a912193f54b8581"]],"x":785.5,"y":908,"z":"de9f5d6922628783"},{"Filter":" ","action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"code = 0","color":"#ffffff","dataBusCode":" ","desc":"ให้ Return ค่า code = 0 เพราะ Success","dirty":false,"display":"Code","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"9370f0cde9574e77","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Set Code Zero","nextNodes":[{"cond":"success","id":"9498e7133455ad86","next":true}],"output":[],"outputs":1,"processId":"1740052446492628057","processName":"flow-validate-token-1740052446492628057","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"de9f5d6922628783","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.endNode}}\n# {{.exception}}\n# {{.Filter}}\n# {{.display}}\n# {{.uuid}}\n# {{.desc}}\n# {{.code}}\n# {{.id}}\n# {{.moved}}\n# {{.flipNode}}\n# {{.name}}\n# {{.dataBusCode}}\n# {{.type}}\n# {{.inactiveNode}}\n\n### Databus Parameter ### \n#{}\n","type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":160,"wires":[["9498e7133455ad86"]],"x":919.5,"y":1325,"z":"de9f5d6922628783"},{"action":"decision","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","decision-field-dataBus-container-div":"","desc":"ตรวจสอบว่ามี ค่าใน Redis","dirty":false,"display":"Decision","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"881282aad889433d","ignoreNode":false,"inactiveNode":false,"input":[],"inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Check Not Found","nextNodes":[{"cond":"not_found","id":"cdafa7b7e636e6b1","next":true},{"cond":"else","id":"9370f0cde9574e77","next":true}],"output":[],"outputs":2,"postEzCode":"","preEzCode":"","processId":"1740052446492628057","processName":"flow-validate-token-1740052446492628057","resize":false,"rule-container":"","rules":[{"cond":"not_found"},{"cond":"else"}],"scopeId":"de9f5d6922628783","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.exception}}\n# {{.preEzCode}}\n# {{.display}}\n# {{.moved}}\n# {{.type}}\n# {{.postEzCode}}\n# {{.name}}\n# {{.desc}}\n# {{.id}}\n# {{.uuid}}\n\n### Databus Parameter ### \n#{}\n","type":"decision","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":180,"wires":[["cdafa7b7e636e6b1"],["9370f0cde9574e77"]],"x":786.5,"y":1162,"z":"de9f5d6922628783"},{"action":"end","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"End","foundIt":false,"h":30,"id":"c55e50cad425ce60","ignoreNode":false,"inputs":1,"l":true,"name":"End","nextNodes":[],"outPort":0,"outputs":0,"processId":"1740052446492628057","processName":"flow-validate-token-1740052446492628057","resize":false,"scopeId":"de9f5d6922628783","scopeType":"subFlow","type":"endsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[],"x":552.5,"y":762,"z":"de9f5d6922628783"},{"action":"end","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"End","foundIt":false,"h":30,"id":"cdafa7b7e636e6b1","ignoreNode":false,"inputs":1,"l":true,"name":"End","nextNodes":[],"outPort":0,"outputs":0,"processId":"1740052446492628057","processName":"flow-validate-token-1740052446492628057","resize":false,"scopeId":"de9f5d6922628783","scopeType":"subFlow","type":"endsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[],"x":630,"y":1320,"z":"de9f5d6922628783"},{"action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"hp_transform:\n    name: \"Convert\"\n    input: |\n        root = this\n\n    mapping: |\n        root = {}\n        let tk = this.token.replace_all(\"Bearer \",\"\")\n        let tk2 = $tk.replace_all(\"bearer \",\"\")\n        let tk3 = $tk2.replace_all(\"enc::\",\"\")\n        \n        root.token = $tk3\n\n    result_mode: merge \n\n    ","color":"#ffffff","desc":"ตัด Prefix ทิ้ง","dirty":false,"display":"Code","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"83696a642b3cecec","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":true,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Cut Prefix","nextNodes":[{"cond":"success","id":"2115f74c603bfb76","next":true}],"output":[],"outputs":1,"processId":"1740052446492628057","processName":"flow-validate-token-1740052446492628057","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"de9f5d6922628783","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.exception}}\n# {{.desc}}\n# {{.display}}\n# {{.id}}\n# {{.type}}\n# {{.code}}\n# {{.uuid}}\n# {{.name}}\n# {{.moved}}\n\n### Databus Parameter ### \n#{}\n","type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":150,"wires":[["2115f74c603bfb76"]],"x":672,"y":349,"z":"de9f5d6922628783"},{"id":"de9f5d6922628783","ignoreNode":true,"info":"","label":"flow-validate-token","scopeId":"de9f5d6922628783","scopeType":"subFlow","teamSharing":"Read-Write","type":"tab"}],"startNodeId":"52e8c70785f341a3"},{"flowId":"d0534c8c9b38ec32","flowName":"sub-get-cache-map","nodes":[{"action":"start","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"Start","execTime":0,"foundIt":false,"h":30,"id":"0fa8330d4183dcf6","ignoreNode":false,"inputs":0,"l":true,"name":"Start","nextNodes":[{"cond":"success","id":"d083fb8aa4f14c34","next":true}],"outputs":1,"processId":"1740052446492800271","processName":"sub-get-cache-map-1740052446492800271","resize":false,"rules":[{"cond":""}],"scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","testFailed":false,"testPassed":false,"testing":false,"type":"startsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[["d083fb8aa4f14c34"]],"x":669.5,"y":120,"z":"d0534c8c9b38ec32"},{"action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"hp_redis_cmd:\n  profile: |-\n    {{hyper_ibank_redis_config}}\n  command: get\n  args_mapping: root = [ this.redis_key ]\n  input: |\n    root = this\n\n  result_mode: merge\n\n  output: |\n    root = {}\n    root.strResult = this","color":"#ffffff","desc":"","dirty":false,"display":"Code","endNode":false,"exception":"custom","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"062424cbf7fe92bd","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":true,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Get by redis_key","nextNodes":[{"cond":"success","id":"63561b0af6cc8dac","next":true},{"cond":"exception","id":"272e53e257af83de","next":true}],"output":[],"outputs":2,"processId":"1740052446492800271","processName":"sub-get-cache-map-1740052446492800271","resize":false,"rules":[{"cond":"success"},{"cond":"exception"}],"sampleResult":"{}","scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.type}}\n# {{.code}}\n# {{.exception}}\n# {{.name}}\n# {{.uuid}}\n# {{.display}}\n# {{.moved}}\n# {{.desc}}\n# {{.id}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":180,"wires":[["63561b0af6cc8dac"],["272e53e257af83de"]],"x":532.5,"y":474,"z":"d0534c8c9b38ec32"},{"action":"define","autoInit":true,"borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","desc":"","dirty":false,"display":"Define","endNode":false,"exception":"","execTime":0,"filterIn":[{"default":false,"name":"not_found","required":false,"type":"boolean","validated":false},{"default":"","max":0,"min":0,"name":"redis_key","regexp":"","required":false,"type":"string","validated":false},{"default":true,"name":"in_cache_value","required":false,"type":"boolean","validated":false},{"all":true,"default":"{}","max":0,"min":0,"name":"result","notEmpty":true,"required":false,"type":"map","validated":false}],"filterOut":[{"default":false,"name":"not_found","required":false,"type":"boolean","validated":false},{"default":"","max":0,"min":0,"name":"redis_key","regexp":"","required":false,"type":"string","validated":false},{"default":true,"name":"in_cache_value","required":false,"type":"boolean","validated":false},{"all":true,"default":"{}","max":0,"min":0,"name":"result","notEmpty":true,"required":false,"type":"map","validated":false}],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"d083fb8aa4f14c34","ignoreNode":false,"inactiveNode":false,"input":[{"children":null,"defaultValue":false,"expanded":true,"id":"1c62b768b01fca19","input":true,"label":"not_found","max":0,"min":0,"name":"not_found","output":true,"regexp":"","required":false,"selected":true,"sublabel":"boolean","type":"boolean","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"2d31f03a5db0c27c","input":true,"label":"redis_key","max":0,"min":0,"name":"redis_key","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":true,"expanded":true,"id":"16eb937d6a85a1d4","input":true,"label":"in_cache_value","max":0,"min":0,"name":"in_cache_value","output":true,"regexp":"","required":false,"selected":true,"sublabel":"boolean","type":"boolean","validated":false},{"children":[],"defaultValue":null,"expanded":true,"id":"0b7561732955112a","input":true,"label":"result","max":0,"min":0,"name":"result","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false}],"inputJson":"{\n    \"not_found\": false,\n    \"redis_key\": \"\",\n    \"in_cache_value\": true,\n    \"result\": {}\n}","inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Define In/Out","nextNodes":[{"cond":"success","id":"c14f8ca3764fe47f","next":true}],"output":[{"children":null,"defaultValue":false,"expanded":true,"id":"1c62b768b01fca19","input":true,"label":"not_found","max":0,"min":0,"name":"not_found","output":true,"regexp":"","required":false,"selected":true,"sublabel":"boolean","type":"boolean","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"2d31f03a5db0c27c","input":true,"label":"redis_key","max":0,"min":0,"name":"redis_key","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":true,"expanded":true,"id":"16eb937d6a85a1d4","input":true,"label":"in_cache_value","max":0,"min":0,"name":"in_cache_value","output":true,"regexp":"","required":false,"selected":true,"sublabel":"boolean","type":"boolean","validated":false},{"children":[],"defaultValue":null,"expanded":true,"id":"0b7561732955112a","input":true,"label":"result","max":0,"min":0,"name":"result","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false}],"outputs":1,"processId":"1740052446492800271","processName":"sub-get-cache-map-1740052446492800271","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{\n    \"not_found\": false,\n    \"redis_key\": \"\",\n    \"in_cache_value\": true,\n    \"result\": {}\n}","scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.display}}\n# {{.type}}\n# {{.moved}}\n# {{.exception}}\n# {{.autoInit}}\n# {{.name}}\n# {{.desc}}\n# {{.id}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"define","useFilterIn":false,"useFilterOut":false,"valid":true,"validationErrors":[],"vertical":true,"w":150,"wires":[["c14f8ca3764fe47f"]],"x":669.5,"y":224,"z":"d0534c8c9b38ec32"},{"action":"decision","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","decision-field-dataBus-container-div":"","desc":"","dirty":false,"display":"Decision","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"c14f8ca3764fe47f","ignoreNode":false,"inactiveNode":false,"input":[],"inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Check Key","nextNodes":[{"cond":"redis_key != null \u0026\u0026 redis_key != \"\"","id":"062424cbf7fe92bd","next":true},{"cond":"else","id":"272e53e257af83de","next":true}],"output":[],"outputs":2,"postEzCode":"","preEzCode":"","processId":"1740052446492800271","processName":"sub-get-cache-map-1740052446492800271","resize":false,"rule-container":"","rules":[{"cond":"redis_key != null \u0026\u0026 redis_key != \"\""},{"cond":"else"}],"scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.uuid}}\n# {{.preEzCode}}\n# {{.id}}\n# {{.postEzCode}}\n# {{.display}}\n# {{.exception}}\n# {{.desc}}\n# {{.type}}\n# {{.moved}}\n# {{.name}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"decision","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":150,"wires":[["062424cbf7fe92bd"],["272e53e257af83de"]],"x":669.5,"y":339,"z":"d0534c8c9b38ec32"},{"action":"decision","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","decision-field-dataBus-container-div":" ","desc":"","dirty":false,"display":"Decision","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"63561b0af6cc8dac","ignoreNode":false,"inactiveNode":false,"input":[],"inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Check Empty","nextNodes":[{"cond":"strResult != null \u0026\u0026 strResult != \"\"","id":"9526fb98677b3fbe","next":true},{"cond":"else","id":"4a79b3d361a4baea","next":true}],"output":[],"outputs":2,"postEzCode":"","preEzCode":"","processId":"1740052446492800271","processName":"sub-get-cache-map-1740052446492800271","resize":false,"rule-container":" ","rules":[{"cond":"strResult != null \u0026\u0026 strResult != \"\""},{"cond":"else"}],"scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.inactiveNode}}\n# {{.endNode}}\n# {{.moved}}\n# {{.postEzCode}}\n# {{.exception}}\n# {{.id}}\n# {{.name}}\n# {{.type}}\n# {{.display}}\n# {{.rule-container}}\n# {{.flipNode}}\n# {{.preEzCode}}\n# {{.uuid}}\n# {{.desc}}\n# {{.decision-field-dataBus-container-div}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"decision","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":160,"wires":[["9526fb98677b3fbe"],["4a79b3d361a4baea"]],"x":678.5,"y":614,"z":"d0534c8c9b38ec32"},{"action":"end","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"End","execTime":0,"foundIt":false,"h":30,"id":"baeea740e703a752","ignoreNode":false,"inputs":1,"l":true,"name":"End","nextNodes":[],"outPort":0,"outputs":0,"processId":"1740052446492800271","processName":"sub-get-cache-map-1740052446492800271","resize":false,"scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","testFailed":false,"testPassed":false,"testing":false,"type":"endsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[],"x":672.5,"y":939,"z":"d0534c8c9b38ec32"},{"Filter":" ","action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"let jsonTmp = this.strResult.parse_json().or({})\nroot.result = if in_cache_value == true { $jsonTmp.cache_value } else { $jsonTmp }","color":"#ffffff","dataBusCode":" ","desc":"","dirty":false,"display":"Code","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"9526fb98677b3fbe","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Convert String to Map","nextNodes":[{"cond":"success","id":"baeea740e703a752","next":true}],"output":[],"outputs":1,"processId":"1740052446492800271","processName":"sub-get-cache-map-1740052446492800271","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.endNode}}\n# {{.type}}\n# {{.moved}}\n# {{.inactiveNode}}\n# {{.uuid}}\n# {{.flipNode}}\n# {{.id}}\n# {{.dataBusCode}}\n# {{.name}}\n# {{.codeEditor}}\n# {{.desc}}\n# {{.exception}}\n# {{.display}}\n# {{.Filter}}\n# {{.code}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":200,"wires":[["baeea740e703a752"]],"x":552.5,"y":781,"z":"d0534c8c9b38ec32"},{"action":"end","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"End","execTime":0,"foundIt":false,"h":30,"id":"1627fdc80db0dbcf","ignoreNode":false,"inputs":1,"l":true,"name":"End","nextNodes":[],"outPort":0,"outputs":0,"processId":"1740052446492800271","processName":"sub-get-cache-map-1740052446492800271","resize":false,"scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","testFailed":false,"testPassed":false,"testing":false,"type":"endsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[],"x":831.5,"y":605,"z":"d0534c8c9b38ec32"},{"Filter":" ","action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"not_found = true","color":"#ffffff","dataBusCode":" ","desc":"","dirty":false,"display":"Code","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"4a79b3d361a4baea","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Return not_found ","nextNodes":[{"cond":"success","id":"baeea740e703a752","next":true}],"output":[],"outputs":1,"processId":"1740052446492800271","processName":"sub-get-cache-map-1740052446492800271","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.endNode}}\n# {{.Filter}}\n# {{.inactiveNode}}\n# {{.display}}\n# {{.uuid}}\n# {{.name}}\n# {{.dataBusCode}}\n# {{.desc}}\n# {{.exception}}\n# {{.moved}}\n# {{.flipNode}}\n# {{.codeEditor}}\n# {{.id}}\n# {{.code}}\n# {{.type}}\n\n### Databus Parameter ### \n#{}\n","type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":180,"wires":[["baeea740e703a752"]],"x":790.5,"y":781,"z":"d0534c8c9b38ec32"},{"Filter":" ","action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"not_found = true","color":"#ffffff","dataBusCode":" ","desc":"","dirty":false,"display":"Code","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"272e53e257af83de","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Return not_found ","nextNodes":[{"cond":"success","id":"1627fdc80db0dbcf","next":true}],"output":[],"outputs":1,"processId":"1740052446492800271","processName":"sub-get-cache-map-1740052446492800271","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.endNode}}\n# {{.Filter}}\n# {{.inactiveNode}}\n# {{.display}}\n# {{.uuid}}\n# {{.name}}\n# {{.dataBusCode}}\n# {{.desc}}\n# {{.exception}}\n# {{.moved}}\n# {{.flipNode}}\n# {{.codeEditor}}\n# {{.id}}\n# {{.code}}\n# {{.type}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":180,"wires":[["1627fdc80db0dbcf"]],"x":832,"y":482,"z":"d0534c8c9b38ec32"},{"id":"d0534c8c9b38ec32","ignoreNode":true,"info":"","label":"sub-get-cache-map","scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","teamSharing":"Read-Write","type":"tab"}],"startNodeId":"0fa8330d4183dcf6"},{"flowId":"3ddb35701ffa09a8","flowName":"flow-decrypt-request","nodes":[{"action":"start","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"Start","execTime":0,"foundIt":false,"h":30,"id":"cbbdce898a754b8b","ignoreNode":false,"inputs":0,"l":true,"name":"Start","nextNodes":[{"cond":"success","id":"ddb4338739792aca","next":true}],"outputs":1,"processId":"1740052446492973909","processName":"flow-decrypt-request-1740052446492973909","resize":false,"rules":[{"cond":""}],"scopeId":"3ddb35701ffa09a8","scopeType":"subFlow","testFailed":false,"testPassed":false,"testing":false,"type":"startsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[["ddb4338739792aca"]],"x":787,"y":168,"z":"3ddb35701ffa09a8"},{"action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"hp_transform:\n  name: \"hp_transform\"\n  input: |\n      root = this\n\n  mapping: |\n      root = {}\n      root.strReq = if request != \"\" {this.request.gcm_decode(this.key.string(), this.request.string(), -1)}\n\n  result_mode: new      ","color":"#ffffff","desc":"","dirty":false,"display":"Code","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"11bfeffca70fb65e","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":true,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Decrypt Code","nextNodes":[{"cond":"success","id":"cdb3a2dcd80ae8bc","next":true}],"output":[],"outputs":1,"processId":"1740052446492973909","processName":"flow-decrypt-request-1740052446492973909","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"3ddb35701ffa09a8","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.display}}\n# {{.moved}}\n# {{.type}}\n# {{.code}}\n# {{.id}}\n# {{.name}}\n# {{.desc}}\n# {{.exception}}\n# {{.uuid}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":160,"wires":[["cdb3a2dcd80ae8bc"]],"x":787,"y":415,"z":"3ddb35701ffa09a8"},{"action":"end","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"End","execTime":0,"foundIt":false,"h":30,"id":"a4d295875883624b","ignoreNode":false,"inputs":1,"l":true,"name":"End","nextNodes":[],"outPort":0,"outputs":0,"processId":"1740052446492973909","processName":"flow-decrypt-request-1740052446492973909","resize":false,"scopeId":"3ddb35701ffa09a8","scopeType":"subFlow","testFailed":false,"testPassed":false,"testing":false,"type":"endsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[],"x":787,"y":688,"z":"3ddb35701ffa09a8"},{"action":"define","autoInit":true,"borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","desc":"ประกาศ input/output","dirty":false,"display":"Define","endNode":false,"exception":"","execTime":0,"filterIn":[{"all":true,"default":"{}","max":0,"min":0,"name":"decryptedRequest","notEmpty":true,"required":false,"type":"map","validated":false},{"default":"jLeGEuLycPA0ZcrwECdk2X85OcT0QhCl","max":0,"min":0,"name":"key","regexp":"","required":false,"type":"string","validated":false},{"default":"","max":0,"min":0,"name":"request","regexp":"","required":false,"type":"string","validated":false}],"filterOut":[{"all":true,"default":"{}","max":0,"min":0,"name":"decryptedRequest","notEmpty":true,"required":false,"type":"map","validated":false},{"default":"jLeGEuLycPA0ZcrwECdk2X85OcT0QhCl","max":0,"min":0,"name":"key","regexp":"","required":false,"type":"string","validated":false},{"default":"","max":0,"min":0,"name":"request","regexp":"","required":false,"type":"string","validated":false}],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"ddb4338739792aca","ignoreNode":false,"inactiveNode":false,"input":[{"children":[],"defaultValue":null,"expanded":true,"id":"317e54310801e036","input":true,"label":"decryptedRequest","max":0,"min":0,"name":"decryptedRequest","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false},{"children":null,"defaultValue":"jLeGEuLycPA0ZcrwECdk2X85OcT0QhCl","expanded":true,"id":"13b8687e4b0aadd7","input":true,"label":"key","max":0,"min":0,"name":"key","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"262f5ef40c9f93a6","input":true,"label":"request","max":0,"min":0,"name":"request","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false}],"inputJson":"{\n    \"decryptedRequest\": {},\n    \"key\": \"jLeGEuLycPA0ZcrwECdk2X85OcT0QhCl\",\n    \"request\": \"\"\n}","inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Define In/Out","nextNodes":[{"cond":"success","id":"11bfeffca70fb65e","next":true}],"output":[{"children":[],"defaultValue":null,"expanded":true,"id":"317e54310801e036","input":true,"label":"decryptedRequest","max":0,"min":0,"name":"decryptedRequest","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false},{"children":null,"defaultValue":"jLeGEuLycPA0ZcrwECdk2X85OcT0QhCl","expanded":true,"id":"13b8687e4b0aadd7","input":true,"label":"key","max":0,"min":0,"name":"key","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"262f5ef40c9f93a6","input":true,"label":"request","max":0,"min":0,"name":"request","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false}],"outputs":1,"processId":"1740052446492973909","processName":"flow-decrypt-request-1740052446492973909","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{\n    \"decryptedRequest\": {},\n    \"key\": \"jLeGEuLycPA0ZcrwECdk2X85OcT0QhCl\",\n    \"request\": \"\"\n}","scopeId":"3ddb35701ffa09a8","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.display}}\n# {{.desc}}\n# {{.moved}}\n# {{.exception}}\n# {{.id}}\n# {{.autoInit}}\n# {{.type}}\n# {{.name}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"define","useFilterIn":false,"useFilterOut":false,"valid":true,"validationErrors":[],"vertical":true,"w":150,"wires":[["11bfeffca70fb65e"]],"x":787,"y":282,"z":"3ddb35701ffa09a8"},{"action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"hp_transform:\n  name: \"hp_transform\"\n  input: |\n      root = this\n\n  mapping: |\n      root = {}\n      root.decryptedRequest = if strReq != null {this.strReq.parse_json()} else {{}}\n\n  result_mode: new      ","color":"#ffffff","desc":"","dirty":false,"display":"Code","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"cdb3a2dcd80ae8bc","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":true,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Convert Data to Json","nextNodes":[{"cond":"success","id":"a4d295875883624b","next":true}],"output":[],"outputs":1,"processId":"1740052446492973909","processName":"flow-decrypt-request-1740052446492973909","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"3ddb35701ffa09a8","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.display}}\n# {{.moved}}\n# {{.type}}\n# {{.code}}\n# {{.id}}\n# {{.name}}\n# {{.desc}}\n# {{.exception}}\n# {{.uuid}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":200,"wires":[["a4d295875883624b"]],"x":787,"y":546,"z":"3ddb35701ffa09a8"},{"id":"3ddb35701ffa09a8","ignoreNode":true,"info":"","label":"flow-decrypt-request","scopeId":"3ddb35701ffa09a8","scopeType":"subFlow","teamSharing":"Read-Write","type":"tab"}],"startNodeId":"cbbdce898a754b8b"},{"flowId":"2dfb873d855e2391","flowName":"sub-validate-secret","nodes":[{"action":"start","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"Start","execTime":0,"foundIt":false,"h":30,"id":"8ecddc8f9a20686c","ignoreNode":false,"inputs":0,"l":true,"name":"Start","nextNodes":[{"cond":"success","id":"266d18d3fef11c2b","next":true}],"outputs":1,"processId":"1740052446493049642","processName":"sub-validate-secret-1740052446493049642","resize":false,"rules":[{"cond":""}],"scopeId":"2dfb873d855e2391","scopeType":"subFlow","testFailed":false,"testPassed":false,"testing":false,"type":"startsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[["266d18d3fef11c2b"]],"x":677.5,"y":104,"z":"2dfb873d855e2391"},{"action":"define","autoInit":true,"borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","desc":"ประกาศ Input / Output","dirty":false,"display":"Define","endNode":false,"exception":"","execTime":0,"filterIn":[{"default":100,"max":0,"min":0,"name":"code","required":false,"type":"integer","validated":false},{"default":"","max":0,"min":0,"name":"customerID","regexp":"","required":false,"type":"string","validated":false},{"default":"","max":0,"min":0,"name":"encCustomerID","regexp":"","required":false,"type":"string","validated":false},{"all":false,"children":[{"all":false,"children":[{"default":"","max":0,"min":0,"name":"customerID","regexp":"","required":false,"type":"string","validated":false},{"default":"","max":0,"min":0,"name":"personID","regexp":"","required":false,"type":"string","validated":false}],"max":0,"min":0,"name":"secret","notEmpty":true,"required":false,"type":"map","validated":false}],"max":0,"min":0,"name":"tokenData","notEmpty":true,"required":false,"type":"map","validated":false},{"all":false,"children":[{"all":false,"children":[{"all":false,"children":[{"default":"","max":0,"min":0,"name":"customerID","regexp":"","required":false,"type":"string","validated":false}],"max":0,"min":0,"name":"Account","notEmpty":true,"required":false,"type":"map","validated":false}],"max":0,"min":0,"name":"debtor","notEmpty":true,"required":false,"type":"map","validated":false}],"max":0,"min":0,"name":"trans","notEmpty":true,"required":false,"type":"map","validated":false},{"default":"","max":0,"min":0,"name":"cif","regexp":"","required":false,"type":"string","validated":false}],"filterOut":[{"default":100,"max":0,"min":0,"name":"code","required":false,"type":"integer","validated":false},{"default":"","max":0,"min":0,"name":"customerID","regexp":"","required":false,"type":"string","validated":false},{"default":"","max":0,"min":0,"name":"encCustomerID","regexp":"","required":false,"type":"string","validated":false},{"all":false,"children":[{"all":false,"children":[{"default":"","max":0,"min":0,"name":"customerID","regexp":"","required":false,"type":"string","validated":false},{"default":"","max":0,"min":0,"name":"personID","regexp":"","required":false,"type":"string","validated":false}],"max":0,"min":0,"name":"secret","notEmpty":true,"required":false,"type":"map","validated":false}],"max":0,"min":0,"name":"tokenData","notEmpty":true,"required":false,"type":"map","validated":false},{"all":false,"children":[{"all":false,"children":[{"all":false,"children":[{"default":"","max":0,"min":0,"name":"customerID","regexp":"","required":false,"type":"string","validated":false}],"max":0,"min":0,"name":"Account","notEmpty":true,"required":false,"type":"map","validated":false}],"max":0,"min":0,"name":"debtor","notEmpty":true,"required":false,"type":"map","validated":false}],"max":0,"min":0,"name":"trans","notEmpty":true,"required":false,"type":"map","validated":false},{"default":"","max":0,"min":0,"name":"cif","regexp":"","required":false,"type":"string","validated":false}],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"266d18d3fef11c2b","ignoreNode":false,"inactiveNode":false,"input":[{"children":null,"defaultValue":100,"expanded":true,"id":"2874e1814e41b545","input":true,"label":"code","max":0,"min":0,"name":"code","output":true,"regexp":"","required":false,"selected":true,"sublabel":"integer","type":"integer","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"0b00aec63b8226a2","input":true,"label":"customerID","max":0,"min":0,"name":"customerID","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"18e61dbca5d14b92","input":true,"label":"encCustomerID","max":0,"min":0,"name":"encCustomerID","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":[{"children":[{"children":null,"defaultValue":"","expanded":true,"id":"00ffb74dac1bc1d2","input":true,"label":"customerID","max":0,"min":0,"name":"customerID","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"4916023c9e78e7af","input":true,"label":"personID","max":0,"min":0,"name":"personID","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false}],"defaultValue":null,"expanded":true,"id":"13da1051cc6fcf67","input":true,"label":"secret","max":0,"min":0,"name":"secret","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false}],"defaultValue":null,"expanded":true,"id":"50a622f27d3e22a9","input":true,"label":"tokenData","max":0,"min":0,"name":"tokenData","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false},{"children":[{"children":[{"children":[{"children":null,"defaultValue":"","expanded":true,"id":"1680a1813eba5163","input":true,"label":"customerID","max":0,"min":0,"name":"customerID","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false}],"defaultValue":null,"expanded":true,"id":"29df6fe524559023","input":true,"label":"Account","max":0,"min":0,"name":"Account","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false}],"defaultValue":null,"expanded":true,"id":"0f14a1d8860b1d8e","input":true,"label":"debtor","max":0,"min":0,"name":"debtor","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false}],"defaultValue":null,"expanded":true,"id":"198523e0b4bca4e0","input":true,"label":"trans","max":0,"min":0,"name":"trans","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"165f9454e0e1d071","input":true,"label":"cif","max":0,"min":0,"name":"cif","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false}],"inputJson":"{\n    \"code\": 100,\n    \"customerID\": \"\",\n    \"encCustomerID\": \"\",\n    \"tokenData\": {\n        \"secret\": {\n            \"customerID\": \"\",\n            \"personID\": \"\"\n        }\n    },\n    \"trans\": {\n        \"debtor\": {\n            \"Account\": {\n                \"customerID\": \"\"\n            }\n        }\n    },\n    \"cif\": \"\"\n}","inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Define In/Out","nextNodes":[{"cond":"success","id":"3206e1fe4094ac77","next":true}],"output":[{"children":null,"defaultValue":100,"expanded":true,"id":"2874e1814e41b545","input":true,"label":"code","max":0,"min":0,"name":"code","output":true,"regexp":"","required":false,"selected":true,"sublabel":"integer","type":"integer","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"0b00aec63b8226a2","input":true,"label":"customerID","max":0,"min":0,"name":"customerID","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"18e61dbca5d14b92","input":true,"label":"encCustomerID","max":0,"min":0,"name":"encCustomerID","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":[{"children":[{"children":null,"defaultValue":"","expanded":true,"id":"00ffb74dac1bc1d2","input":true,"label":"customerID","max":0,"min":0,"name":"customerID","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"4916023c9e78e7af","input":true,"label":"personID","max":0,"min":0,"name":"personID","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false}],"defaultValue":null,"expanded":true,"id":"13da1051cc6fcf67","input":true,"label":"secret","max":0,"min":0,"name":"secret","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false}],"defaultValue":null,"expanded":true,"id":"50a622f27d3e22a9","input":true,"label":"tokenData","max":0,"min":0,"name":"tokenData","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false},{"children":[{"children":[{"children":[{"children":null,"defaultValue":"","expanded":true,"id":"1680a1813eba5163","input":true,"label":"customerID","max":0,"min":0,"name":"customerID","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false}],"defaultValue":null,"expanded":true,"id":"29df6fe524559023","input":true,"label":"Account","max":0,"min":0,"name":"Account","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false}],"defaultValue":null,"expanded":true,"id":"0f14a1d8860b1d8e","input":true,"label":"debtor","max":0,"min":0,"name":"debtor","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false}],"defaultValue":null,"expanded":true,"id":"198523e0b4bca4e0","input":true,"label":"trans","max":0,"min":0,"name":"trans","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"165f9454e0e1d071","input":true,"label":"cif","max":0,"min":0,"name":"cif","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false}],"outputs":1,"processId":"1740052446493049642","processName":"sub-validate-secret-1740052446493049642","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{\n    \"code\": 100,\n    \"customerID\": \"\",\n    \"encCustomerID\": \"\",\n    \"tokenData\": {\n        \"secret\": {\n            \"customerID\": \"\",\n            \"personID\": \"\"\n        }\n    },\n    \"trans\": {\n        \"debtor\": {\n            \"Account\": {\n                \"customerID\": \"\"\n            }\n        }\n    },\n    \"cif\": \"\"\n}","scopeId":"2dfb873d855e2391","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.name}}\n# {{.exception}}\n# {{.display}}\n# {{.moved}}\n# {{.desc}}\n# {{.id}}\n# {{.type}}\n# {{.autoInit}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"define","useFilterIn":false,"useFilterOut":false,"valid":true,"validationErrors":[],"vertical":true,"w":150,"wires":[["3206e1fe4094ac77"]],"x":677.5,"y":216,"z":"2dfb873d855e2391"},{"action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"root.customerID = if this.customerID == null || this.customerID == \"\" {\n    this.trans.debtor.Account.customerID.or(\"\")\n}\nroot.encCustomerID = this.tokenData.secret.customerID.or(\"\")","color":"#ffffff","desc":"เตรียมค่าก่อนใช้งาน","dirty":false,"display":"Code","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"3206e1fe4094ac77","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Prepare CustomerID","nextNodes":[{"cond":"success","id":"dadc486981ec0d74","next":true}],"output":[],"outputs":1,"processId":"1740052446493049642","processName":"sub-validate-secret-1740052446493049642","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"2dfb873d855e2391","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.exception}}\n# {{.name}}\n# {{.type}}\n# {{.uuid}}\n# {{.code}}\n# {{.desc}}\n# {{.moved}}\n# {{.id}}\n# {{.display}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":200,"wires":[["dadc486981ec0d74"]],"x":677.5,"y":346,"z":"2dfb873d855e2391"},{"action":"decision","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","decision-field-dataBus-container-div":"","desc":"ตรวจสอบดูว่ามี Value หรือไม่ ถ้าไม่มี return code = 100","dirty":false,"display":"Decision","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"dadc486981ec0d74","ignoreNode":false,"inactiveNode":false,"input":[],"inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Check Value","nextNodes":[{"cond":"customerID == \"\" || encCustomerID == \"\"","id":"19b010a35302da84","next":true},{"cond":"else","id":"fabcbfb6d35ba771","next":true}],"output":[],"outputs":2,"postEzCode":"","preEzCode":"","processId":"1740052446493049642","processName":"sub-validate-secret-1740052446493049642","resize":false,"rule-container":"","rules":[{"cond":"customerID == \"\" || encCustomerID == \"\""},{"cond":"else"}],"scopeId":"2dfb873d855e2391","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.type}}\n# {{.preEzCode}}\n# {{.desc}}\n# {{.name}}\n# {{.uuid}}\n# {{.moved}}\n# {{.exception}}\n# {{.display}}\n# {{.id}}\n# {{.postEzCode}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"decision","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":150,"wires":[["19b010a35302da84"],["fabcbfb6d35ba771"]],"x":677.5,"y":480,"z":"2dfb873d855e2391"},{"action":"end","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"End","execTime":0,"foundIt":false,"h":30,"id":"19b010a35302da84","ignoreNode":false,"inputs":1,"l":true,"name":"End","nextNodes":[],"outPort":0,"outputs":0,"processId":"1740052446493049642","processName":"sub-validate-secret-1740052446493049642","resize":false,"scopeId":"2dfb873d855e2391","scopeType":"subFlow","testFailed":false,"testPassed":false,"testing":false,"type":"endsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[],"x":545.5,"y":638,"z":"2dfb873d855e2391"},{"Filter":" ","action":"code","advanceCode":"","borderColor":"#3FADB5","borderLineSize":"2","changed":true,"code":"let str = this.encCustomerID.cif_decode(this.key.weight.or(0), this.key.secret_key.string()).or(\"\")\n\nlet obj = $str.parse_json().or({})\n\nroot.cif = if $obj.cif != null {\n    $obj.cif.int64().or(0).string()\n}else {\n    $obj.customerID.or(\"\")\n}","color":"#FFFFFF","dataBusCode":" ","desc":"ถอดรหัสของ CIF ออกมา\nยัง Develop ไม่เสร็จ รอ function ibk_cif_decode จากพี่เอก","dirty":false,"display":"Code","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"52f04873b0837e0d","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Decrypt encCustomerID","nextNodes":[{"cond":"success","id":"806efbd0d89c1bbf","next":true}],"output":[],"outputs":1,"processId":"1740052446493049642","processName":"sub-validate-secret-1740052446493049642","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"2dfb873d855e2391","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.display}}\n# {{.exception}}\n# {{.endNode}}\n# {{.moved}}\n# {{.codeEditor}}\n# {{.desc}}\n# {{.name}}\n# {{.dataBusCode}}\n# {{.type}}\n# {{.uuid}}\n# {{.id}}\n# {{.code}}\n# {{.inactiveNode}}\n# {{.flipNode}}\n# {{.Filter}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":220,"wires":[["806efbd0d89c1bbf"]],"x":818.5,"y":777,"z":"2dfb873d855e2391"},{"action":"decision","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","decision-field-dataBus-container-div":"","desc":"เปรียบเทียบค่า customerID กับ CIF ถ้าไม่เท่ากัน return code = 100","dirty":false,"display":"Decision","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"806efbd0d89c1bbf","ignoreNode":false,"inactiveNode":false,"input":[],"inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Compare Value","nextNodes":[{"cond":"customerID != \"\" \u0026\u0026 customerID == cif","id":"27c5f2265df7cc07","next":true},{"cond":"else","id":"f3d8eba8d08d1704","next":true}],"output":[],"outputs":2,"postEzCode":"","preEzCode":"","processId":"1740052446493049642","processName":"sub-validate-secret-1740052446493049642","resize":false,"rule-container":"","rules":[{"cond":"customerID != \"\" \u0026\u0026 customerID == cif"},{"cond":"else"}],"scopeId":"2dfb873d855e2391","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.type}}\n# {{.preEzCode}}\n# {{.desc}}\n# {{.name}}\n# {{.uuid}}\n# {{.moved}}\n# {{.exception}}\n# {{.display}}\n# {{.id}}\n# {{.postEzCode}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"decision","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":160,"wires":[["27c5f2265df7cc07"],["f3d8eba8d08d1704"]],"x":819,"y":907,"z":"2dfb873d855e2391"},{"Filter":" ","action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"root.code = 0","color":"#ffffff","dataBusCode":" ","desc":"ให้ code กลับเป็น 0","dirty":false,"display":"Code","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"27c5f2265df7cc07","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Set Code 0","nextNodes":[{"cond":"success","id":"80da27a3c7bd3639","next":true}],"output":[],"outputs":1,"processId":"1740052446493049642","processName":"sub-validate-secret-1740052446493049642","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"2dfb873d855e2391","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.Filter}}\n# {{.name}}\n# {{.desc}}\n# {{.inactiveNode}}\n# {{.type}}\n# {{.uuid}}\n# {{.exception}}\n# {{.flipNode}}\n# {{.id}}\n# {{.endNode}}\n# {{.dataBusCode}}\n# {{.codeEditor}}\n# {{.display}}\n# {{.code}}\n# {{.moved}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":150,"wires":[["80da27a3c7bd3639"]],"x":710.5,"y":1046,"z":"2dfb873d855e2391"},{"Filter":" ","action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"root.code = 100","color":"#ffffff","dataBusCode":" ","desc":"ให้ code = 100 เมื่อ Error","dirty":false,"display":"Code","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"f3d8eba8d08d1704","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Set Code 100","nextNodes":[{"cond":"success","id":"80da27a3c7bd3639","next":true}],"output":[],"outputs":1,"processId":"1740052446493049642","processName":"sub-validate-secret-1740052446493049642","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"2dfb873d855e2391","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.name}}\n# {{.display}}\n# {{.dataBusCode}}\n# {{.moved}}\n# {{.type}}\n# {{.id}}\n# {{.code}}\n# {{.Filter}}\n# {{.endNode}}\n# {{.exception}}\n# {{.uuid}}\n# {{.inactiveNode}}\n# {{.flipNode}}\n# {{.desc}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":160,"wires":[["80da27a3c7bd3639"]],"x":920,"y":1044,"z":"2dfb873d855e2391"},{"action":"end","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"End","execTime":0,"foundIt":false,"h":30,"id":"80da27a3c7bd3639","ignoreNode":false,"inputs":1,"l":true,"name":"End","nextNodes":[],"outPort":0,"outputs":0,"processId":"1740052446493049642","processName":"sub-validate-secret-1740052446493049642","resize":false,"scopeId":"2dfb873d855e2391","scopeType":"subFlow","testFailed":false,"testPassed":false,"testing":false,"type":"endsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[],"x":812,"y":1173,"z":"2dfb873d855e2391"},{"action":"subflow","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","desc":"อ่านค่าจาก Setting","dirty":false,"display":"Subflow","endNode":false,"exception":"","exposedAll":false,"filterIn":[],"filterOut":[{"all":true,"default":"{\"secret_key\":\"\",\"weight\":0}","max":0,"min":0,"name":"key","required":false,"type":"map","validated":false},{"all":true,"default":"{\"crypt_key\":\"\"}","max":0,"min":0,"name":"ppgateway","required":false,"type":"map","validated":false}],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"fabcbfb6d35ba771","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Read Setting Config","nextNodes":[{"cond":"success","id":"52f04873b0837e0d","next":true}],"output":[{"children":[{"children":null,"defaultValue":null,"depth":1,"expanded":true,"id":"52febf4b376ad521","input":false,"label":"secret_key","max":0,"min":0,"name":"secret_key","output":true,"regexp":"","required":false,"selected":false,"sublabel":"string","treeList":{"container":{"0":{},"length":1,"prevObject":{"length":1}},"label":{"0":{},"length":1},"labelPadding":{"0":{},"length":1,"prevObject":{"length":1}},"parentList":{"0":{},"length":1,"prevObject":{"length":1}}},"type":"string","validated":false},{"children":null,"defaultValue":null,"depth":1,"expanded":true,"id":"20f67a05677f6431","input":false,"label":"weight","max":0,"min":0,"name":"weight","output":true,"regexp":"","required":false,"selected":false,"sublabel":"integer","treeList":{"container":{"0":{},"length":1,"prevObject":{"length":1}},"label":{"0":{},"length":1},"labelPadding":{"0":{},"length":1,"prevObject":{"length":1}}},"type":"integer","validated":false}],"defaultValue":null,"depth":0,"expanded":true,"id":"0b911225bd2c7bc4","input":false,"label":"key","max":0,"min":0,"name":"key","output":true,"regexp":"","required":false,"selected":false,"sublabel":"map","treeList":{"container":{"0":{},"length":1,"prevObject":{"length":1}},"label":{"0":{},"length":1},"labelPadding":{"0":{},"length":1,"prevObject":{"length":1}},"parentList":{"0":{},"length":1,"prevObject":{"length":1}}},"type":"map","validated":false},{"children":[{"children":null,"defaultValue":null,"depth":1,"expanded":true,"id":"2d8eb8dad71f03a8","input":false,"label":"crypt_key","max":0,"min":0,"name":"crypt_key","output":true,"regexp":"","required":false,"selected":false,"sublabel":"string","treeList":{"container":{"0":{},"length":1,"prevObject":{"length":1}},"label":{"0":{},"length":1},"labelPadding":{"0":{},"length":1,"prevObject":{"length":1}},"parentList":{"0":{},"length":1,"prevObject":{"length":1}}},"type":"string","validated":false}],"defaultValue":null,"depth":0,"expanded":true,"id":"0e9af8a795738f72","input":false,"label":"ppgateway","max":0,"min":0,"name":"ppgateway","output":true,"regexp":"","required":false,"selected":false,"sublabel":"map","treeList":{"container":{"0":{},"length":1,"prevObject":{"length":1}},"label":{"0":{},"length":1},"labelPadding":{"0":{},"length":1,"prevObject":{"length":1}}},"type":"map","validated":false}],"outputs":1,"processId":"1740052446493049642","processName":"sub-validate-secret-1740052446493049642","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"2dfb873d855e2391","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.exposedAll}}\n# {{.subflowId}}\n# {{.type}}\n# {{.exception}}\n# {{.moved}}\n# {{.display}}\n# {{.name}}\n# {{.desc}}\n# {{.id}}\n\n### Databus Parameter ### \n#{}\n","subflow":true,"subflowId":"35256fcf5dfe5b2d","type":"ssqsubflow","useFilterIn":true,"useFilterOut":true,"valid":true,"validationErrors":[],"vertical":true,"w":200,"wires":[["52f04873b0837e0d"]],"x":818.5,"y":643,"z":"2dfb873d855e2391"},{"id":"2dfb873d855e2391","ignoreNode":true,"info":"","label":"sub-validate-secret","scopeId":"2dfb873d855e2391","scopeType":"subFlow","teamSharing":"Read-Write","type":"tab"}],"startNodeId":"8ecddc8f9a20686c"},{"flowId":"35256fcf5dfe5b2d","flowName":"flow-setting-config-yaml","nodes":[{"action":"start","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"Start","foundIt":false,"h":30,"id":"b6aac101577e73f0","ignoreNode":false,"inputs":0,"l":true,"name":"Start","nextNodes":[{"cond":"success","id":"d5c2280b73b877d7","next":true}],"outputs":1,"processId":"1740052446493395800","processName":"flow-setting-config-yaml-1740052446493395800","resize":false,"rules":[{"cond":""}],"scopeId":"35256fcf5dfe5b2d","scopeType":"subFlow","type":"startsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[["d5c2280b73b877d7"]],"x":669.5,"y":131,"z":"35256fcf5dfe5b2d"},{"action":"define","autoInit":true,"borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","desc":"ตัว config ที่เป็น default","dirty":false,"display":"Define","endNode":false,"exception":"","filterIn":[{"all":false,"children":[{"default":"GIT3f+DWZxNpYDxGl1x6MuEH1RiKa4ntc7pPq/i+fj+iScaFmmFTmbG5LQPFFMdZ1qsxQgYy1oXVJsVio2gK7YShLmpicyCk1zWFY8693Xo=","max":0,"min":0,"name":"secret_key","regexp":"","required":false,"type":"string","validated":false},{"default":50158,"max":0,"min":0,"name":"weight","required":false,"type":"integer","validated":false}],"max":0,"min":0,"name":"key","notEmpty":true,"required":false,"type":"map","validated":false},{"all":false,"children":[{"default":"sA1JL6vbbp2UvmzrTwE5olyp5ejwlOfO","max":0,"min":0,"name":"crypt_key","regexp":"","required":false,"type":"string","validated":false}],"max":0,"min":0,"name":"ppgateway","notEmpty":true,"required":false,"type":"map","validated":false},{"default":"hyper_ibank_setting_config","max":0,"min":0,"name":"redis_key","regexp":"","required":false,"type":"string","validated":false}],"filterOut":[{"all":false,"children":[{"default":"GIT3f+DWZxNpYDxGl1x6MuEH1RiKa4ntc7pPq/i+fj+iScaFmmFTmbG5LQPFFMdZ1qsxQgYy1oXVJsVio2gK7YShLmpicyCk1zWFY8693Xo=","max":0,"min":0,"name":"secret_key","regexp":"","required":false,"type":"string","validated":false},{"default":50158,"max":0,"min":0,"name":"weight","required":false,"type":"integer","validated":false}],"max":0,"min":0,"name":"key","notEmpty":true,"required":false,"type":"map","validated":false},{"all":false,"children":[{"default":"sA1JL6vbbp2UvmzrTwE5olyp5ejwlOfO","max":0,"min":0,"name":"crypt_key","regexp":"","required":false,"type":"string","validated":false}],"max":0,"min":0,"name":"ppgateway","notEmpty":true,"required":false,"type":"map","validated":false},{"default":"hyper_ibank_setting_config","max":0,"min":0,"name":"redis_key","regexp":"","required":false,"type":"string","validated":false}],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"d5c2280b73b877d7","ignoreNode":false,"inactiveNode":false,"input":[{"children":[{"children":null,"defaultValue":"GIT3f+DWZxNpYDxGl1x6MuEH1RiKa4ntc7pPq/i+fj+iScaFmmFTmbG5LQPFFMdZ1qsxQgYy1oXVJsVio2gK7YShLmpicyCk1zWFY8693Xo=","expanded":true,"id":"52febf4b376ad521","input":true,"label":"secret_key","max":0,"min":0,"name":"secret_key","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":50158,"expanded":true,"id":"20f67a05677f6431","input":true,"label":"weight","max":0,"min":0,"name":"weight","output":true,"regexp":"","required":false,"selected":true,"sublabel":"integer","type":"integer","validated":false}],"defaultValue":null,"expanded":true,"id":"0b911225bd2c7bc4","input":true,"label":"key","max":0,"min":0,"name":"key","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false},{"children":[{"children":null,"defaultValue":"sA1JL6vbbp2UvmzrTwE5olyp5ejwlOfO","expanded":true,"id":"2d8eb8dad71f03a8","input":true,"label":"crypt_key","max":0,"min":0,"name":"crypt_key","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false}],"defaultValue":null,"expanded":true,"id":"0e9af8a795738f72","input":true,"label":"ppgateway","max":0,"min":0,"name":"ppgateway","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false},{"children":null,"defaultValue":"hyper_ibank_setting_config","expanded":true,"id":"3c2c9ee0728d6071","input":true,"label":"redis_key","max":0,"min":0,"name":"redis_key","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false}],"inputJson":"{\n    \"key\": {\n        \"secret_key\": \"GIT3f+DWZxNpYDxGl1x6MuEH1RiKa4ntc7pPq/i+fj+iScaFmmFTmbG5LQPFFMdZ1qsxQgYy1oXVJsVio2gK7YShLmpicyCk1zWFY8693Xo=\",\n        \"weight\": 50158\n    },\n    \"ppgateway\": {\n        \"crypt_key\": \"sA1JL6vbbp2UvmzrTwE5olyp5ejwlOfO\"\n    },\n    \"redis_key\": \"hyper_ibank_setting_config\"\n}","inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Default Config","nextNodes":[{"cond":"success","id":"28b5e5a2c66c3df9","next":true}],"output":[{"children":[{"children":null,"defaultValue":"GIT3f+DWZxNpYDxGl1x6MuEH1RiKa4ntc7pPq/i+fj+iScaFmmFTmbG5LQPFFMdZ1qsxQgYy1oXVJsVio2gK7YShLmpicyCk1zWFY8693Xo=","expanded":true,"id":"52febf4b376ad521","input":true,"label":"secret_key","max":0,"min":0,"name":"secret_key","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":50158,"expanded":true,"id":"20f67a05677f6431","input":true,"label":"weight","max":0,"min":0,"name":"weight","output":true,"regexp":"","required":false,"selected":true,"sublabel":"integer","type":"integer","validated":false}],"defaultValue":null,"expanded":true,"id":"0b911225bd2c7bc4","input":true,"label":"key","max":0,"min":0,"name":"key","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false},{"children":[{"children":null,"defaultValue":"sA1JL6vbbp2UvmzrTwE5olyp5ejwlOfO","expanded":true,"id":"2d8eb8dad71f03a8","input":true,"label":"crypt_key","max":0,"min":0,"name":"crypt_key","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false}],"defaultValue":null,"expanded":true,"id":"0e9af8a795738f72","input":true,"label":"ppgateway","max":0,"min":0,"name":"ppgateway","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false},{"children":null,"defaultValue":"hyper_ibank_setting_config","expanded":true,"id":"3c2c9ee0728d6071","input":true,"label":"redis_key","max":0,"min":0,"name":"redis_key","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false}],"outputs":1,"processId":"1740052446493395800","processName":"flow-setting-config-yaml-1740052446493395800","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{\n    \"key\": {\n        \"secret_key\": \"GIT3f+DWZxNpYDxGl1x6MuEH1RiKa4ntc7pPq/i+fj+iScaFmmFTmbG5LQPFFMdZ1qsxQgYy1oXVJsVio2gK7YShLmpicyCk1zWFY8693Xo=\",\n        \"weight\": 50158\n    },\n    \"ppgateway\": {\n        \"crypt_key\": \"sA1JL6vbbp2UvmzrTwE5olyp5ejwlOfO\"\n    },\n    \"redis_key\": \"hyper_ibank_setting_config\"\n}","scopeId":"35256fcf5dfe5b2d","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.autoInit}}\n# {{.type}}\n# {{.id}}\n# {{.exception}}\n# {{.desc}}\n# {{.display}}\n# {{.name}}\n# {{.moved}}\n\n### Databus Parameter ### \n#{}\n","type":"define","useFilterIn":false,"useFilterOut":false,"valid":true,"validationErrors":[],"vertical":true,"w":160,"wires":[["28b5e5a2c66c3df9"]],"x":670.5,"y":244,"z":"35256fcf5dfe5b2d"},{"action":"end","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"End","foundIt":false,"h":30,"id":"2136e5a4ca19fce7","ignoreNode":false,"inputs":1,"l":true,"name":"End","nextNodes":[],"outPort":0,"outputs":0,"processId":"1740052446493395800","processName":"flow-setting-config-yaml-1740052446493395800","resize":false,"scopeId":"35256fcf5dfe5b2d","scopeType":"subFlow","type":"endsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[],"x":531.5,"y":673,"z":"35256fcf5dfe5b2d"},{"action":"subflow","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","desc":"อ่าน Config จาก Redis","dirty":false,"display":"Subflow","endNode":false,"exception":"","exposedAll":false,"filterIn":[{"default":null,"max":0,"min":0,"name":"redis_key","regexp":"","required":false,"type":"string","validated":false}],"filterOut":[{"default":null,"name":"not_found","required":false,"type":"boolean","validated":false},{"all":true,"default":"{}","max":0,"min":0,"name":"result","required":false,"type":"map","validated":false}],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"28b5e5a2c66c3df9","ignoreNode":false,"inactiveNode":false,"input":[{"children":null,"defaultValue":null,"expanded":true,"id":"2d31f03a5db0c27c","input":true,"label":"redis_key","max":0,"min":0,"name":"redis_key","output":false,"regexp":"","required":false,"selected":false,"sublabel":"string","type":"string","validated":false}],"inputJson":"{\n    \"redis_key\": \"\"\n}","inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Get Config from Redis","nextNodes":[{"cond":"success","id":"328ebb953cc8b39b","next":true}],"output":[{"children":null,"defaultValue":null,"expanded":true,"id":"1c62b768b01fca19","input":false,"label":"not_found","max":0,"min":0,"name":"not_found","output":true,"regexp":"","required":false,"selected":false,"sublabel":"boolean","type":"boolean","validated":false},{"children":null,"defaultValue":null,"expanded":true,"id":"0b7561732955112a","input":false,"label":"result","max":0,"min":0,"name":"result","output":true,"regexp":"","required":false,"selected":false,"sublabel":"map","type":"map","validated":false}],"outputs":1,"processId":"1740052446493395800","processName":"flow-setting-config-yaml-1740052446493395800","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{\n    \"redis_key\": \"\"\n}","scopeId":"35256fcf5dfe5b2d","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.display}}\n# {{.moved}}\n# {{.type}}\n# {{.exposedAll}}\n# {{.subflowId}}\n# {{.id}}\n# {{.desc}}\n# {{.name}}\n# {{.exception}}\n\n### Databus Parameter ### \n#{}\n","subflow":true,"subflowId":"d0534c8c9b38ec32","type":"ssqsubflow","useFilterIn":true,"useFilterOut":true,"valid":true,"validationErrors":[],"vertical":true,"w":200,"wires":[["328ebb953cc8b39b"]],"x":670.5,"y":376,"z":"35256fcf5dfe5b2d"},{"action":"decision","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","decision-field-dataBus-container-div":"","desc":"ตรวจสอบว่า เจอบน Redis หรือป่าว","dirty":false,"display":"Decision","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"328ebb953cc8b39b","ignoreNode":false,"inactiveNode":false,"input":[],"inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Check Not Found","nextNodes":[{"cond":"not_found","id":"2136e5a4ca19fce7","next":true},{"cond":"else","id":"90f95a0345242416","next":true}],"output":[],"outputs":2,"postEzCode":"","preEzCode":"","processId":"1740052446493395800","processName":"flow-setting-config-yaml-1740052446493395800","resize":false,"rule-container":"","rules":[{"cond":"not_found"},{"cond":"else"}],"scopeId":"35256fcf5dfe5b2d","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.display}}\n# {{.preEzCode}}\n# {{.uuid}}\n# {{.moved}}\n# {{.postEzCode}}\n# {{.exception}}\n# {{.name}}\n# {{.id}}\n# {{.desc}}\n# {{.type}}\n\n### Databus Parameter ### \n#{}\n","type":"decision","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":180,"wires":[["2136e5a4ca19fce7"],["90f95a0345242416"]],"x":670.5,"y":506,"z":"35256fcf5dfe5b2d"},{"action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"root = if this.result.length().or(0) \u003e 0 {\n    this.result\n} else {\n    this\n}","color":"#ffffff","desc":"Merge value ที่ได้จาก cache เข้ามา","dirty":false,"display":"Code","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"90f95a0345242416","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Merge Value from Cache","nextNodes":[{"cond":"success","id":"2136e5a4ca19fce7","next":true}],"output":[],"outputs":1,"processId":"1740052446493395800","processName":"flow-setting-config-yaml-1740052446493395800","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"35256fcf5dfe5b2d","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.moved}}\n# {{.exception}}\n# {{.display}}\n# {{.uuid}}\n# {{.code}}\n# {{.type}}\n# {{.id}}\n# {{.desc}}\n# {{.name}}\n\n### Databus Parameter ### \n#{}\n","type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":220,"wires":[["2136e5a4ca19fce7"]],"x":779.5,"y":654,"z":"35256fcf5dfe5b2d"},{"id":"35256fcf5dfe5b2d","ignoreNode":true,"info":"","label":"flow-setting-config-yaml","scopeId":"35256fcf5dfe5b2d","scopeType":"subFlow","teamSharing":"Read-Write","type":"tab"}],"startNodeId":"b6aac101577e73f0"},{"flowId":"d0534c8c9b38ec32","flowName":"sub-get-cache-map","nodes":[{"action":"start","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"Start","execTime":0,"foundIt":false,"h":30,"id":"0fa8330d4183dcf6","ignoreNode":false,"inputs":0,"l":true,"name":"Start","nextNodes":[{"cond":"success","id":"d083fb8aa4f14c34","next":true}],"outputs":1,"processId":"1740052446493536753","processName":"sub-get-cache-map-1740052446493536753","resize":false,"rules":[{"cond":""}],"scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","testFailed":false,"testPassed":false,"testing":false,"type":"startsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[["d083fb8aa4f14c34"]],"x":669.5,"y":120,"z":"d0534c8c9b38ec32"},{"action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"hp_redis_cmd:\n  profile: |-\n    {{hyper_ibank_redis_config}}\n  command: get\n  args_mapping: root = [ this.redis_key ]\n  input: |\n    root = this\n\n  result_mode: merge\n\n  output: |\n    root = {}\n    root.strResult = this","color":"#ffffff","desc":"","dirty":false,"display":"Code","endNode":false,"exception":"custom","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"062424cbf7fe92bd","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":true,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Get by redis_key","nextNodes":[{"cond":"success","id":"63561b0af6cc8dac","next":true},{"cond":"exception","id":"272e53e257af83de","next":true}],"output":[],"outputs":2,"processId":"1740052446493536753","processName":"sub-get-cache-map-1740052446493536753","resize":false,"rules":[{"cond":"success"},{"cond":"exception"}],"sampleResult":"{}","scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.type}}\n# {{.code}}\n# {{.exception}}\n# {{.name}}\n# {{.uuid}}\n# {{.display}}\n# {{.moved}}\n# {{.desc}}\n# {{.id}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":180,"wires":[["63561b0af6cc8dac"],["272e53e257af83de"]],"x":532.5,"y":474,"z":"d0534c8c9b38ec32"},{"action":"define","autoInit":true,"borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","desc":"","dirty":false,"display":"Define","endNode":false,"exception":"","execTime":0,"filterIn":[{"default":false,"name":"not_found","required":false,"type":"boolean","validated":false},{"default":"","max":0,"min":0,"name":"redis_key","regexp":"","required":false,"type":"string","validated":false},{"default":true,"name":"in_cache_value","required":false,"type":"boolean","validated":false},{"all":true,"default":"{}","max":0,"min":0,"name":"result","notEmpty":true,"required":false,"type":"map","validated":false}],"filterOut":[{"default":false,"name":"not_found","required":false,"type":"boolean","validated":false},{"default":"","max":0,"min":0,"name":"redis_key","regexp":"","required":false,"type":"string","validated":false},{"default":true,"name":"in_cache_value","required":false,"type":"boolean","validated":false},{"all":true,"default":"{}","max":0,"min":0,"name":"result","notEmpty":true,"required":false,"type":"map","validated":false}],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"d083fb8aa4f14c34","ignoreNode":false,"inactiveNode":false,"input":[{"children":null,"defaultValue":false,"expanded":true,"id":"1c62b768b01fca19","input":true,"label":"not_found","max":0,"min":0,"name":"not_found","output":true,"regexp":"","required":false,"selected":true,"sublabel":"boolean","type":"boolean","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"2d31f03a5db0c27c","input":true,"label":"redis_key","max":0,"min":0,"name":"redis_key","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":true,"expanded":true,"id":"16eb937d6a85a1d4","input":true,"label":"in_cache_value","max":0,"min":0,"name":"in_cache_value","output":true,"regexp":"","required":false,"selected":true,"sublabel":"boolean","type":"boolean","validated":false},{"children":[],"defaultValue":null,"expanded":true,"id":"0b7561732955112a","input":true,"label":"result","max":0,"min":0,"name":"result","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false}],"inputJson":"{\n    \"not_found\": false,\n    \"redis_key\": \"\",\n    \"in_cache_value\": true,\n    \"result\": {}\n}","inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Define In/Out","nextNodes":[{"cond":"success","id":"c14f8ca3764fe47f","next":true}],"output":[{"children":null,"defaultValue":false,"expanded":true,"id":"1c62b768b01fca19","input":true,"label":"not_found","max":0,"min":0,"name":"not_found","output":true,"regexp":"","required":false,"selected":true,"sublabel":"boolean","type":"boolean","validated":false},{"children":null,"defaultValue":"","expanded":true,"id":"2d31f03a5db0c27c","input":true,"label":"redis_key","max":0,"min":0,"name":"redis_key","output":true,"regexp":"","required":false,"selected":true,"sublabel":"string","type":"string","validated":false},{"children":null,"defaultValue":true,"expanded":true,"id":"16eb937d6a85a1d4","input":true,"label":"in_cache_value","max":0,"min":0,"name":"in_cache_value","output":true,"regexp":"","required":false,"selected":true,"sublabel":"boolean","type":"boolean","validated":false},{"children":[],"defaultValue":null,"expanded":true,"id":"0b7561732955112a","input":true,"label":"result","max":0,"min":0,"name":"result","output":true,"regexp":"","required":false,"selected":true,"sublabel":"map","type":"map","validated":false}],"outputs":1,"processId":"1740052446493536753","processName":"sub-get-cache-map-1740052446493536753","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{\n    \"not_found\": false,\n    \"redis_key\": \"\",\n    \"in_cache_value\": true,\n    \"result\": {}\n}","scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.display}}\n# {{.type}}\n# {{.moved}}\n# {{.exception}}\n# {{.autoInit}}\n# {{.name}}\n# {{.desc}}\n# {{.id}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"define","useFilterIn":false,"useFilterOut":false,"valid":true,"validationErrors":[],"vertical":true,"w":150,"wires":[["c14f8ca3764fe47f"]],"x":669.5,"y":224,"z":"d0534c8c9b38ec32"},{"action":"decision","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","decision-field-dataBus-container-div":"","desc":"","dirty":false,"display":"Decision","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"c14f8ca3764fe47f","ignoreNode":false,"inactiveNode":false,"input":[],"inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Check Key","nextNodes":[{"cond":"redis_key != null \u0026\u0026 redis_key != \"\"","id":"062424cbf7fe92bd","next":true},{"cond":"else","id":"272e53e257af83de","next":true}],"output":[],"outputs":2,"postEzCode":"","preEzCode":"","processId":"1740052446493536753","processName":"sub-get-cache-map-1740052446493536753","resize":false,"rule-container":"","rules":[{"cond":"redis_key != null \u0026\u0026 redis_key != \"\""},{"cond":"else"}],"scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.uuid}}\n# {{.preEzCode}}\n# {{.id}}\n# {{.postEzCode}}\n# {{.display}}\n# {{.exception}}\n# {{.desc}}\n# {{.type}}\n# {{.moved}}\n# {{.name}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"decision","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":150,"wires":[["062424cbf7fe92bd"],["272e53e257af83de"]],"x":669.5,"y":339,"z":"d0534c8c9b38ec32"},{"action":"decision","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"","color":"#ffffff","decision-field-dataBus-container-div":" ","desc":"","dirty":false,"display":"Decision","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"63561b0af6cc8dac","ignoreNode":false,"inactiveNode":false,"input":[],"inputs":1,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Check Empty","nextNodes":[{"cond":"strResult != null \u0026\u0026 strResult != \"\"","id":"9526fb98677b3fbe","next":true},{"cond":"else","id":"4a79b3d361a4baea","next":true}],"output":[],"outputs":2,"postEzCode":"","preEzCode":"","processId":"1740052446493536753","processName":"sub-get-cache-map-1740052446493536753","resize":false,"rule-container":" ","rules":[{"cond":"strResult != null \u0026\u0026 strResult != \"\""},{"cond":"else"}],"scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.inactiveNode}}\n# {{.endNode}}\n# {{.moved}}\n# {{.postEzCode}}\n# {{.exception}}\n# {{.id}}\n# {{.name}}\n# {{.type}}\n# {{.display}}\n# {{.rule-container}}\n# {{.flipNode}}\n# {{.preEzCode}}\n# {{.uuid}}\n# {{.desc}}\n# {{.decision-field-dataBus-container-div}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"decision","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":160,"wires":[["9526fb98677b3fbe"],["4a79b3d361a4baea"]],"x":678.5,"y":614,"z":"d0534c8c9b38ec32"},{"action":"end","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"End","execTime":0,"foundIt":false,"h":30,"id":"baeea740e703a752","ignoreNode":false,"inputs":1,"l":true,"name":"End","nextNodes":[],"outPort":0,"outputs":0,"processId":"1740052446493536753","processName":"sub-get-cache-map-1740052446493536753","resize":false,"scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","testFailed":false,"testPassed":false,"testing":false,"type":"endsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[],"x":672.5,"y":939,"z":"d0534c8c9b38ec32"},{"Filter":" ","action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"let jsonTmp = this.strResult.parse_json().or({})\nroot.result = if in_cache_value == true { $jsonTmp.cache_value } else { $jsonTmp }","color":"#ffffff","dataBusCode":" ","desc":"","dirty":false,"display":"Code","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"9526fb98677b3fbe","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Convert String to Map","nextNodes":[{"cond":"success","id":"baeea740e703a752","next":true}],"output":[],"outputs":1,"processId":"1740052446493536753","processName":"sub-get-cache-map-1740052446493536753","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.endNode}}\n# {{.type}}\n# {{.moved}}\n# {{.inactiveNode}}\n# {{.uuid}}\n# {{.flipNode}}\n# {{.id}}\n# {{.dataBusCode}}\n# {{.name}}\n# {{.codeEditor}}\n# {{.desc}}\n# {{.exception}}\n# {{.display}}\n# {{.Filter}}\n# {{.code}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":200,"wires":[["baeea740e703a752"]],"x":552.5,"y":781,"z":"d0534c8c9b38ec32"},{"action":"end","changed":false,"color":"#ffffff","desc":"","dirty":false,"display":"End","execTime":0,"foundIt":false,"h":30,"id":"1627fdc80db0dbcf","ignoreNode":false,"inputs":1,"l":true,"name":"End","nextNodes":[],"outPort":0,"outputs":0,"processId":"1740052446493536753","processName":"sub-get-cache-map-1740052446493536753","resize":false,"scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","testFailed":false,"testPassed":false,"testing":false,"type":"endsub","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":30,"wires":[],"x":831.5,"y":605,"z":"d0534c8c9b38ec32"},{"Filter":" ","action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"not_found = true","color":"#ffffff","dataBusCode":" ","desc":"","dirty":false,"display":"Code","endNode":false,"exception":"","filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"4a79b3d361a4baea","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Return not_found ","nextNodes":[{"cond":"success","id":"baeea740e703a752","next":true}],"output":[],"outputs":1,"processId":"1740052446493536753","processName":"sub-get-cache-map-1740052446493536753","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.endNode}}\n# {{.Filter}}\n# {{.inactiveNode}}\n# {{.display}}\n# {{.uuid}}\n# {{.name}}\n# {{.dataBusCode}}\n# {{.desc}}\n# {{.exception}}\n# {{.moved}}\n# {{.flipNode}}\n# {{.codeEditor}}\n# {{.id}}\n# {{.code}}\n# {{.type}}\n\n### Databus Parameter ### \n#{}\n","type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":180,"wires":[["baeea740e703a752"]],"x":790.5,"y":781,"z":"d0534c8c9b38ec32"},{"Filter":" ","action":"code","borderColor":"#3FADB5","borderLineSize":"2","changed":false,"code":"not_found = true","color":"#ffffff","dataBusCode":" ","desc":"","dirty":false,"display":"Code","endNode":false,"exception":"","execTime":0,"filterIn":[],"filterOut":[],"flipNode":false,"foundIt":false,"h":65,"headerTextColor":"#999696","headerTextSize":"14","id":"272e53e257af83de","ignoreNode":false,"inactiveNode":false,"input":[],"inputJson":"{}","inputs":1,"isAdvance":false,"l":true,"mainTextColor":"#333333","mainTextSize":"14","name":"Return not_found ","nextNodes":[{"cond":"success","id":"1627fdc80db0dbcf","next":true}],"output":[],"outputs":1,"processId":"1740052446493536753","processName":"sub-get-cache-map-1740052446493536753","resize":false,"rules":[{"cond":"success"}],"sampleResult":"{}","scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","skeletonConfig":"### Fix Parameter ### \n# {{.endNode}}\n# {{.Filter}}\n# {{.inactiveNode}}\n# {{.display}}\n# {{.uuid}}\n# {{.name}}\n# {{.dataBusCode}}\n# {{.desc}}\n# {{.exception}}\n# {{.moved}}\n# {{.flipNode}}\n# {{.codeEditor}}\n# {{.id}}\n# {{.code}}\n# {{.type}}\n\n### Databus Parameter ### \n#{}\n","testFailed":false,"testPassed":false,"testing":false,"type":"code","useFilterIn":false,"useFilterOut":false,"uuid":"","valid":true,"validationErrors":[],"vertical":true,"w":180,"wires":[["1627fdc80db0dbcf"]],"x":832,"y":482,"z":"d0534c8c9b38ec32"},{"id":"d0534c8c9b38ec32","ignoreNode":true,"info":"","label":"sub-get-cache-map","scopeId":"d0534c8c9b38ec32","scopeType":"subFlow","teamSharing":"Read-Write","type":"tab"}],"startNodeId":"0fa8330d4183dcf6"}]}